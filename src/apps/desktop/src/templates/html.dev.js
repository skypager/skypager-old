export default (async function compile(params = {}) {
  const { compilation, webpack, webpackConfig, htmlWebpackPlugin: { files, options } } = params
  const { skypager } = options

  const page = skypager.page('html')

  page.initialState = {}

  page.dllPublicPath = skypager.argv.hot ? '/' : ''
  page.publicPath = skypager.argv.hot ? '/' : ''

  page.stylesheets = ['semantic.css', 'json-inspector.css']

  page.dllScripts = [
    'react.js',
    'react-dom.js',
    'react-router-dom.js',
    'prop-types.js',
    'semantic-ui-react.min.js',
  ]

  page.headTop = `
  <style>
    html, body, #app {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
    }

    .MultiDrawerLayout .ui.bottom.sidebar,
    .MultiDrawerLayout .ui.top.sidebar
     {
      height: 50% !important;
    }

    .Console .inverted .ui.input input {
      color: #FFFFFF !important;
    }
  </style>
  `

  page.bodyBottom = `
    <script>
    </script>
  `

  page.bodyTop = `
  <div id='splash' style="margin: 10px auto; width: 600px; height: 646px;"><svg  width="600px" height="646px" viewBox="0 0 600 646" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <title>Slice 1</title>
      <desc>Created with Sketch.</desc>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <g id="skypager-logo" fill-rule="nonzero">
              <g id="logo-type" transform="translate(0.000000, 569.283355)">
                  <g id="Group">
                      <path d="M0.432721163,63.2787517 L9.82370275,52.0301952 C16.3249406,57.3967054 23.1349516,60.8019852 31.3906571,60.8019852 C37.891895,60.8019852 41.8132591,58.221563 41.8132591,53.9914257 L41.8132591,53.7846629 C41.8132591,49.7601915 39.3364926,47.6953054 27.2630786,44.6004441 C12.712898,40.8858428 3.3224649,36.8613715 3.3224649,22.5168569 L3.3224649,22.310094 C3.3224649,9.20451113 13.8481741,0.537473688 28.6051175,0.537473688 C39.1302782,0.537473688 48.1082826,3.83909777 55.4349265,9.72169244 L47.1792209,21.690354 C40.7816387,17.2534538 34.4866153,14.5710214 28.3983547,14.5710214 C22.310094,14.5710214 19.1110287,17.3571095 19.1110287,20.8665933 L19.1110287,21.0722592 C19.1110287,25.8195778 22.2075353,27.3678311 34.6928297,30.5668964 C49.3461174,34.3857018 57.6018229,39.6485564 57.6018229,52.2380549 L57.6018229,52.4448178 C57.6018229,66.787687 46.663685,74.8366297 31.081884,74.8366297 C20.1426491,74.8355328 9.10085549,71.0178243 0.432721163,63.2787517 Z" id="Shape" fill="#72BAE7"></path>
                      <polygon id="Shape" fill="#72BAE7" points="81.7481026 1.5690941 97.6408705 1.5690941 97.6408705 33.1462217 126.947446 1.5690941 146.14129 1.5690941 116.731607 32.2177085 147.48278 73.8039124 128.391495 73.8039124 105.999135 43.0527393 97.6408705 51.7208736 97.6408705 73.8050093 81.7481026 73.8050093 81.7481026 1.5690941"></polygon>
                      <polygon id="Shape" fill="#72BAE7" points="184.630438 45.322743 156.872116 1.57019099 175.446768 1.57019099 192.67993 30.5668964 210.221864 1.57019099 228.281529 1.57019099 200.523206 45.0139698 200.523206 73.8050093 184.630438 73.8050093 184.630438 45.322743"></polygon>
                      <path d="M248.50425,1.5690941 L278.01704,1.5690941 C295.250202,1.5690941 305.672804,11.7849333 305.672804,26.5407798 L305.672804,26.7475426 C305.672804,43.4640712 292.670876,52.1333024 276.469884,52.1333024 L264.395921,52.1333024 L264.395921,73.8039124 L248.503702,73.8039124 L248.50425,1.5690941 L248.50425,1.5690941 Z M276.985968,37.9966475 C284.931255,37.9966475 289.575467,33.2493289 289.575467,27.0579611 L289.575467,26.8511982 C289.575467,19.7313172 284.621934,15.9136087 276.676098,15.9136087 L264.395373,15.9136087 L264.395373,37.9977444 L276.985968,37.9966475 L276.985968,37.9966475 Z" id="Shape" fill="#5592B5"></path>
                      <path d="M334.980476,1.05300967 L349.633764,1.05300967 L380.591151,73.8039124 L363.977181,73.8039124 L357.373385,57.6023714 L326.827878,57.6023714 L320.224081,73.8039124 L304.02254,73.8039124 L334.980476,1.05300967 Z M351.697553,43.5688237 L342.100905,20.1431976 L332.504258,43.5688237 L351.697553,43.5688237 Z" id="Shape" fill="#5592B5"></path>
                      <path d="M383.892775,37.8929919 L383.892775,37.6873259 C383.892775,17.1525404 399.887554,0.331259293 421.764378,0.331259293 C434.767402,0.331259293 442.61013,3.83909777 450.14244,10.2372284 L440.132815,22.3106425 C434.560639,17.6669795 429.607655,14.9856439 421.248294,14.9856439 C409.690964,14.9856439 400.506745,25.2014831 400.506745,37.48166 L400.506745,37.6884228 C400.506745,50.8971129 409.588405,60.5974161 422.38357,60.5974161 C428.162509,60.5974161 433.321708,59.1517216 437.346727,56.2636232 L437.346727,45.9441283 L421.351949,45.9441283 L421.351949,32.2209991 L452.722314,32.2209991 L452.722314,63.5913639 C445.292014,69.8858389 435.076175,75.0455863 421.867485,75.0455863 C399.370921,75.0422957 383.892775,59.2542803 383.892775,37.8929919 Z" id="Shape" fill="#5592B5"></path>
                      <polygon id="Shape" fill="#5592B5" points="467.9926 1.5690941 522.479269 1.5690941 522.479269 15.705749 483.781712 15.705749 483.781712 30.3601336 517.835606 30.3601336 517.835606 44.4967885 483.781712 44.4967885 483.781712 59.6656122 522.995353 59.6656122 522.995353 73.8022671 467.993148 73.8022671"></polygon>
                      <path d="M537.13146,1.5690941 L570.153185,1.5690941 C579.337404,1.5690941 586.457833,4.14841936 591.205152,8.89518953 C595.229623,12.9196609 597.39652,18.5954927 597.39652,25.4060522 L597.39652,25.6117181 C597.39652,37.2727034 591.101496,44.5993472 581.917277,48.004627 L599.563416,73.8022671 L580.988764,73.8022671 L565.509522,50.6876079 L553.022582,50.6876079 L553.022582,73.8022671 L537.130363,73.8022671 L537.13146,1.5690941 L537.13146,1.5690941 Z M569.121565,36.6546086 C576.860637,36.6546086 581.298086,32.5275785 581.298086,26.4387695 L581.298086,26.2320066 C581.298086,19.4214472 576.551316,15.9136087 568.811146,15.9136087 L553.022582,15.9136087 L553.022582,36.6546086 L569.121565,36.6546086 L569.121565,36.6546086 Z" id="Shape" fill="#5592B5"></path>
                  </g>
              </g>
              <g id="background-smoke" transform="translate(246.250700, 386.651990)" fill="#C1C1C0">
                  <g id="Group" transform="translate(0.000000, 34.003437)">
                      <circle id="Oval" cx="24.3826584" cy="30.0184539" r="23.885221"></circle>
                      <circle id="Oval" cx="16.7543711" cy="9.62023057" r="9.10524303"></circle>
                  </g>
                  <circle id="Oval" cx="134.63661" cy="41.8165498" r="38.3959137"></circle>
                  <circle id="Oval" cx="181.802669" cy="22.1274627" r="22.067134"></circle>
              </g>
              <polygon id="smoke-trail" fill="#D1D2D1" points="285.106757 351.797918 270.90045 489.306173 325.258784 492.827175 315.96707 351.795724"></polygon>
              <path d="M526.596975,498.233173 C526.596975,489.54694 520.65844,482.248266 512.619369,480.176251 C515.287542,473.517061 516.758465,466.250198 516.758465,458.63946 C516.758465,426.645517 490.824811,400.70912 458.830318,400.70912 C438.780905,400.70912 421.113377,410.895892 410.714906,426.374586 C407.13577,423.781001 402.737261,422.247007 397.977877,422.247007 C392.331661,422.247007 387.190012,424.40129 383.326234,427.929969 C375.300875,420.580291 364.611729,416.091288 352.872317,416.091288 C327.960411,416.091288 307.766757,436.286039 307.766757,461.197396 C307.766757,462.429198 307.829828,463.646192 307.926902,464.852218 C306.070973,462.929378 303.492744,461.783133 300.091304,461.783133 C295.767383,461.783133 292.770693,463.631933 290.902698,466.580908 C287.393762,464.288967 283.324319,462.784589 278.945005,462.315671 C277.727462,455.43875 271.715984,450.211544 264.488608,450.211544 C262.7835,450.211544 261.143109,450.502767 259.623923,451.040241 C252.225981,441.853828 240.889674,435.974524 228.176228,435.974524 C226.443149,435.974524 224.736944,436.083664 223.065292,436.292621 C223.103134,435.826445 223.120684,435.354236 223.120684,434.883672 C223.120684,425.1373 215.223112,417.234243 205.471255,417.234243 C198.49013,417.234243 192.451777,421.292717 189.587811,427.176957 C180.214928,418.095297 167.436216,412.517637 153.363181,412.517637 C124.586401,412.517637 101.255655,435.847834 101.255655,464.630647 C101.255655,469.829882 102.01799,474.853616 103.437908,479.591611 C103.295313,479.586126 103.158202,479.586126 103.015607,479.586126 C92.7207925,479.586126 84.368561,487.93397 84.368561,498.233173 C84.368561,508.531827 92.7207925,516.880219 103.015607,516.880219 L508.133657,516.880219 L508.130367,516.874735 C518.345657,516.778757 526.596975,508.471498 526.596975,498.233173 Z" id="foreground-smoke" fill="#E2E1E0"></path>
              <g id="rocket" transform="translate(161.790549, 0.000000)">
                  <path d="M166.774246,29.8681807 L109.640793,29.8687291 C122.331205,-0.774400865 138.206423,0.46453083 138.206423,0.46453083 C138.206423,0.46453083 154.08548,-0.774400865 166.774246,29.8681807 Z" id="nose" fill="#5592B5"></path>
                  <path d="M78.3971187,278.092177 L66.1553328,278.092725 L13.2613406,335.707162 L0.0553926964,350.151493 C13.9841879,253.662901 56.6195624,193.911183 71.9797925,170.009509 L70.0487264,236.967213 C70.0476295,237.97196 70.0706641,238.992611 70.1178301,240.028619 C70.6410443,251.955599 74.1066527,265.504872 78.3971187,278.092177 Z" id="left-wing" fill="#5592B5"></path>
                  <path d="M276.359098,350.154784 L263.158635,335.711001 L210.264643,278.091628 L198.029438,278.091628 C202.320453,265.502678 205.786061,251.955051 206.309824,240.027522 C206.355893,238.993708 206.380573,237.974154 206.380573,236.967213 L204.449506,170.003476 C219.807543,193.904053 262.442369,253.657416 276.359098,350.154784 Z" id="right-wing" fill="#5592B5"></path>
                  <path d="M190.842647,125.492976 C187.79221,91.522994 178.977641,62.1780275 169.405125,39.0661105 L107.028561,39.0661105 C97.4489156,62.177479 88.6359924,91.522994 85.5828128,125.492428 C85.5828128,125.492428 81.7212289,238.995902 81.768395,240.028619 C82.2932545,251.955599 85.7572176,265.502678 90.0498773,278.091628 C98.0401367,301.540289 108.888879,321.640708 108.888879,321.640708 L167.538227,321.640708 C167.538227,321.640708 178.38642,301.539192 186.376131,278.09108 C190.668242,265.502678 194.132754,251.956696 194.657613,240.026425 C194.705876,238.99316 190.842647,125.492976 190.842647,125.492976 Z M137.868034,230.951347 C127.420203,230.951347 118.949508,222.480652 118.949508,212.031725 C118.948412,201.582249 127.420203,193.112102 137.869131,193.111554 C148.318606,193.112102 156.788753,201.582797 156.788753,212.030079 C156.788753,222.478458 148.315864,230.951347 137.868034,230.951347 Z M137.868034,167.986304 C124.075801,167.985207 112.893606,156.802464 112.893606,143.010231 C112.893606,129.213062 124.075801,118.035255 137.869131,118.035255 C151.661912,118.035255 162.842462,129.213062 162.843559,143.010231 C162.842462,156.803012 151.661912,167.984659 137.868034,167.986304 Z" id="body" fill="#72BAE7"></path>
                  <polygon id="tail" fill="#5592B5" points="159.916521 331.269714 154.167198 342.211691 122.259359 342.213885 116.510584 331.268617"></polygon>
              </g>
          </g>
      </g>
  </svg></div>
  `

  return await page.render()
})
