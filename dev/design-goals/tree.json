{"README.md":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals","base":"README.md","ext":".md","name":"README","path":"/Users/jon/Projects/skypager/src/design-goals/README.md","relative":"README.md","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":13312841,"size":3626,"blocks":8,"atimeMs":1511406389000,"mtimeMs":1510637307000,"ctimeMs":1510637307000,"birthtimeMs":1510637307000,"atime":"2017-11-23T03:06:29.000Z","mtime":"2017-11-14T05:28:27.000Z","ctime":"2017-11-14T05:28:27.000Z","birthtime":"2017-11-14T05:28:27.000Z"},"extension":".md","mime":{"mimeType":"text/markdown"},"content":"# Skypager Design Goals\n\nSkypager exists to simplify a team's experience building Javascript applications.  To do this, it is important to understand several aspects of the modern Javascript environment that informed the design process.\n\n1) **Multi Platform Build Targets** It is now commonplace for a JavaScript project to contain code that gets run in the web browser, on a mobile device, and on the server.  As language capabilities and available \"native APIs\" vary from environment to environment, and version to version, we rely on build tools such as babel to transpile code that is guaranteed to run in every environment.\n\n2) **Javascript Modules** Modern javascript projects rely on public repositories such as npm and github to use open source dependencies and frameworks.  It is common to develop large applications by breaking the application apart into many different smaller modules.  Making all of these dependencies available to our projects, and ensuring we are using the correct versions that are compatible with each other and with our project was once a manual chore but is now fairly automated.\n\n3) **Universal Module Defintion** aka `umd`.  To take advantage of these developments, and especially with module formats not being standardized across all environments, the idea of `Universal` javascript emerged and developers found ourselves being able to write code once and have it run on multiple platforms without any headaches.\n\nThanks to tools like Webpack which makes it easy to create and distribute `universal module bundles` this is feasible with some boilerplate configuration.  Libraries like `React` ship slightly different builds depending if you are using it on the browser or on the server.  Loading libraries this way require a certain amount of behind the scenes code that helps standardize how different modules and different formats are loaded and made vailable at runtime. So much of this is solved at build time that application developers can expect to \"get it for free\" simply by opting into tooling ecosystem.\n\nSkypager is designed to take advantage of these modern aspects of the Javascript build environment.\n\n## The Skypager Runtime\n\n[To read more about Runtimes](runtime-goals.md)\n\nGiven that modern javascript projects are transpiled and distributed using module bundlers, Skypager provides framework and application developers with several pieces of functionality designed to help us further take advantage of all of the metadata and utilities available at build time.  This metadata and information is made available to Skypager so that it can customize the runtime capabilities based on the module being used.\n\nFeatures can be loaded, configured, and toggled prior to the start of an application, or on demand when needed by the application.\n\nThese additional customizations how javascript modules are loaded and incorporated into the application, in specific ways or sequences, are all facilitated by the utilities and capabilities made available by the `Runtime`.\n\nThe Runtime attempts to do as much work as possible using `convention over configuration` style techniques.\n\n## Skypager Helper Classes\n\n[To read more about Helper Classes](helper-goals.md)\n\nCommon patterns that are used in every project such as `Commands` and `Servers` are made available by the framework.  Developers can easily build their own reusable `Helper` components that capture patterns the framework shouldn't try to provide at a generic level.  Additionally, developers can create their own `Commands` and `Servers` as needed by conforming to the module specifications defined by these helpers.\n","hash":"b1e6b96f24bee7d745a1d28e7e984fb7","ast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Skypager Design Goals","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":24,"offset":23},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":24,"offset":23},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Skypager exists to simplify a team's experience building Javascript applications.  To do this, it is important to understand several aspects of the modern Javascript environment that informed the design process.","position":{"start":{"line":3,"column":1,"offset":25},"end":{"line":3,"column":212,"offset":236},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":25},"end":{"line":3,"column":212,"offset":236},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"1) ","position":{"start":{"line":5,"column":1,"offset":238},"end":{"line":5,"column":4,"offset":241},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Multi Platform Build Targets","position":{"start":{"line":5,"column":6,"offset":243},"end":{"line":5,"column":34,"offset":271},"indent":[]}}],"position":{"start":{"line":5,"column":4,"offset":241},"end":{"line":5,"column":36,"offset":273},"indent":[]}},{"type":"text","value":" It is now commonplace for a JavaScript project to contain code that gets run in the web browser, on a mobile device, and on the server.  As language capabilities and available \"native APIs\" vary from environment to environment, and version to version, we rely on build tools such as babel to transpile code that is guaranteed to run in every environment.","position":{"start":{"line":5,"column":36,"offset":273},"end":{"line":5,"column":391,"offset":628},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":238},"end":{"line":5,"column":391,"offset":628},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"2) ","position":{"start":{"line":7,"column":1,"offset":630},"end":{"line":7,"column":4,"offset":633},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Javascript Modules","position":{"start":{"line":7,"column":6,"offset":635},"end":{"line":7,"column":24,"offset":653},"indent":[]}}],"position":{"start":{"line":7,"column":4,"offset":633},"end":{"line":7,"column":26,"offset":655},"indent":[]}},{"type":"text","value":" Modern javascript projects rely on public repositories such as npm and github to use open source dependencies and frameworks.  It is common to develop large applications by breaking the application apart into many different smaller modules.  Making all of these dependencies available to our projects, and ensuring we are using the correct versions that are compatible with each other and with our project was once a manual chore but is now fairly automated.","position":{"start":{"line":7,"column":26,"offset":655},"end":{"line":7,"column":485,"offset":1114},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":630},"end":{"line":7,"column":485,"offset":1114},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"3) ","position":{"start":{"line":9,"column":1,"offset":1116},"end":{"line":9,"column":4,"offset":1119},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Universal Module Defintion","position":{"start":{"line":9,"column":6,"offset":1121},"end":{"line":9,"column":32,"offset":1147},"indent":[]}}],"position":{"start":{"line":9,"column":4,"offset":1119},"end":{"line":9,"column":34,"offset":1149},"indent":[]}},{"type":"text","value":" aka ","position":{"start":{"line":9,"column":34,"offset":1149},"end":{"line":9,"column":39,"offset":1154},"indent":[]}},{"type":"inlineCode","value":"umd","position":{"start":{"line":9,"column":39,"offset":1154},"end":{"line":9,"column":44,"offset":1159},"indent":[]}},{"type":"text","value":".  To take advantage of these developments, and especially with module formats not being standardized across all environments, the idea of ","position":{"start":{"line":9,"column":44,"offset":1159},"end":{"line":9,"column":183,"offset":1298},"indent":[]}},{"type":"inlineCode","value":"Universal","position":{"start":{"line":9,"column":183,"offset":1298},"end":{"line":9,"column":194,"offset":1309},"indent":[]}},{"type":"text","value":" javascript emerged and developers found ourselves being able to write code once and have it run on multiple platforms without any headaches.","position":{"start":{"line":9,"column":194,"offset":1309},"end":{"line":9,"column":335,"offset":1450},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":1116},"end":{"line":9,"column":335,"offset":1450},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Thanks to tools like Webpack which makes it easy to create and distribute ","position":{"start":{"line":11,"column":1,"offset":1452},"end":{"line":11,"column":75,"offset":1526},"indent":[]}},{"type":"inlineCode","value":"universal module bundles","position":{"start":{"line":11,"column":75,"offset":1526},"end":{"line":11,"column":101,"offset":1552},"indent":[]}},{"type":"text","value":" this is feasible with some boilerplate configuration.  Libraries like ","position":{"start":{"line":11,"column":101,"offset":1552},"end":{"line":11,"column":172,"offset":1623},"indent":[]}},{"type":"inlineCode","value":"React","position":{"start":{"line":11,"column":172,"offset":1623},"end":{"line":11,"column":179,"offset":1630},"indent":[]}},{"type":"text","value":" ship slightly different builds depending if you are using it on the browser or on the server.  Loading libraries this way require a certain amount of behind the scenes code that helps standardize how different modules and different formats are loaded and made vailable at runtime. So much of this is solved at build time that application developers can expect to \"get it for free\" simply by opting into tooling ecosystem.","position":{"start":{"line":11,"column":179,"offset":1630},"end":{"line":11,"column":601,"offset":2052},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":1452},"end":{"line":11,"column":601,"offset":2052},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Skypager is designed to take advantage of these modern aspects of the Javascript build environment.","position":{"start":{"line":13,"column":1,"offset":2054},"end":{"line":13,"column":100,"offset":2153},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":2054},"end":{"line":13,"column":100,"offset":2153},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The Skypager Runtime","position":{"start":{"line":15,"column":4,"offset":2158},"end":{"line":15,"column":24,"offset":2178},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":2155},"end":{"line":15,"column":24,"offset":2178},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"runtime-goals.md","children":[{"type":"text","value":"To read more about Runtimes","position":{"start":{"line":17,"column":2,"offset":2181},"end":{"line":17,"column":29,"offset":2208},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":2180},"end":{"line":17,"column":48,"offset":2227},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":2180},"end":{"line":17,"column":48,"offset":2227},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Given that modern javascript projects are transpiled and distributed using module bundlers, Skypager provides framework and application developers with several pieces of functionality designed to help us further take advantage of all of the metadata and utilities available at build time.  This metadata and information is made available to Skypager so that it can customize the runtime capabilities based on the module being used.","position":{"start":{"line":19,"column":1,"offset":2229},"end":{"line":19,"column":432,"offset":2660},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":2229},"end":{"line":19,"column":432,"offset":2660},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Features can be loaded, configured, and toggled prior to the start of an application, or on demand when needed by the application.","position":{"start":{"line":21,"column":1,"offset":2662},"end":{"line":21,"column":131,"offset":2792},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":2662},"end":{"line":21,"column":131,"offset":2792},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"These additional customizations how javascript modules are loaded and incorporated into the application, in specific ways or sequences, are all facilitated by the utilities and capabilities made available by the ","position":{"start":{"line":23,"column":1,"offset":2794},"end":{"line":23,"column":213,"offset":3006},"indent":[]}},{"type":"inlineCode","value":"Runtime","position":{"start":{"line":23,"column":213,"offset":3006},"end":{"line":23,"column":222,"offset":3015},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":23,"column":222,"offset":3015},"end":{"line":23,"column":223,"offset":3016},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":2794},"end":{"line":23,"column":223,"offset":3016},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Runtime attempts to do as much work as possible using ","position":{"start":{"line":25,"column":1,"offset":3018},"end":{"line":25,"column":59,"offset":3076},"indent":[]}},{"type":"inlineCode","value":"convention over configuration","position":{"start":{"line":25,"column":59,"offset":3076},"end":{"line":25,"column":90,"offset":3107},"indent":[]}},{"type":"text","value":" style techniques.","position":{"start":{"line":25,"column":90,"offset":3107},"end":{"line":25,"column":108,"offset":3125},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":3018},"end":{"line":25,"column":108,"offset":3125},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Skypager Helper Classes","position":{"start":{"line":27,"column":4,"offset":3130},"end":{"line":27,"column":27,"offset":3153},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":3127},"end":{"line":27,"column":27,"offset":3153},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"helper-goals.md","children":[{"type":"text","value":"To read more about Helper Classes","position":{"start":{"line":29,"column":2,"offset":3156},"end":{"line":29,"column":35,"offset":3189},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":3155},"end":{"line":29,"column":53,"offset":3207},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":3155},"end":{"line":29,"column":53,"offset":3207},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Common patterns that are used in every project such as ","position":{"start":{"line":31,"column":1,"offset":3209},"end":{"line":31,"column":56,"offset":3264},"indent":[]}},{"type":"inlineCode","value":"Commands","position":{"start":{"line":31,"column":56,"offset":3264},"end":{"line":31,"column":66,"offset":3274},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":31,"column":66,"offset":3274},"end":{"line":31,"column":71,"offset":3279},"indent":[]}},{"type":"inlineCode","value":"Servers","position":{"start":{"line":31,"column":71,"offset":3279},"end":{"line":31,"column":80,"offset":3288},"indent":[]}},{"type":"text","value":" are made available by the framework.  Developers can easily build their own reusable ","position":{"start":{"line":31,"column":80,"offset":3288},"end":{"line":31,"column":166,"offset":3374},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":31,"column":166,"offset":3374},"end":{"line":31,"column":174,"offset":3382},"indent":[]}},{"type":"text","value":" components that capture patterns the framework shouldn't try to provide at a generic level.  Additionally, developers can create their own ","position":{"start":{"line":31,"column":174,"offset":3382},"end":{"line":31,"column":314,"offset":3522},"indent":[]}},{"type":"inlineCode","value":"Commands","position":{"start":{"line":31,"column":314,"offset":3522},"end":{"line":31,"column":324,"offset":3532},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":31,"column":324,"offset":3532},"end":{"line":31,"column":329,"offset":3537},"indent":[]}},{"type":"inlineCode","value":"Servers","position":{"start":{"line":31,"column":329,"offset":3537},"end":{"line":31,"column":338,"offset":3546},"indent":[]}},{"type":"text","value":" as needed by conforming to the module specifications defined by these helpers.","position":{"start":{"line":31,"column":338,"offset":3546},"end":{"line":31,"column":417,"offset":3625},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":3209},"end":{"line":31,"column":417,"offset":3625},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":32,"column":1,"offset":3626}}},"astHash":"b1e6b96f24bee7d745a1d28e7e984fb7"},"desired-states/helper-goals.md":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals/desired-states","base":"helper-goals.md","ext":".md","name":"helper-goals","path":"/Users/jon/Projects/skypager/src/design-goals/desired-states/helper-goals.md","relative":"desired-states/helper-goals.md","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":14047181,"size":1680,"blocks":8,"atimeMs":1511406389000,"mtimeMs":1511403874000,"ctimeMs":1511403874000,"birthtimeMs":1511403874000,"atime":"2017-11-23T03:06:29.000Z","mtime":"2017-11-23T02:24:34.000Z","ctime":"2017-11-23T02:24:34.000Z","birthtime":"2017-11-23T02:24:34.000Z"},"extension":".md","mime":{"mimeType":"text/markdown"},"content":"## Simplify the way Helper classes can be attached to the runtime\n\nCurrently the `Feature` helper is very useful.  It can be loaded via the middleware style API `runtime.use` or enabled directly thru `runtime.feature(\"feature-name\").enable()`.  Doing this gives us the opportunity to decorate the runtime, and create a shortcut to the interface for working with that particular feature.  A lot of interfaces are implemented as feature modules.\n\nEach `Helper` implementation is complicated, they must be registered, then `attached`, and then given an opportunity to decorate the runtime methods for working with those helpers.\n\nSince the `Feature` helper is the only one provided by default by Skypager, every `Helper` implementation should expose a feature implementation that the runtime can enable.  It is in these feature models that the `Helper` package can control how their interface behaves and how they wish to extend the runtime to provide shortcuts and conveniences for working with the individual `Helpers`\n\nExample:\n\n```javascript\nimport skypager from 'skypager-runtime'\nimport commands from 'skypager-helpers-command'\nimport servers from 'skypager-helpers-server'\n\nexport const runtime = skypager\n  .use(commandHelper)\n  .use(serverHelper)\n\nexport default runtime\n```\n\n## Add support for asynchronous module loading\n\nEither via `System.import` or `import` or `require.ensure` or other `Promise` API (e.g. Webpack bundle-loader)\n\n## A React Component Implementation synchronized with every Helper Instance\n\nThe ability to render the runtime and helper state as a React component tree.\n\nUsing React Custom Renderers, we can render any state object in any form we wish.\n","hash":"b73c9b06ffd5a386500158eca156b485","ast":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"text","value":"Simplify the way Helper classes can be attached to the runtime","position":{"start":{"line":1,"column":4,"offset":3},"end":{"line":1,"column":66,"offset":65},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":66,"offset":65},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Currently the ","position":{"start":{"line":3,"column":1,"offset":67},"end":{"line":3,"column":15,"offset":81},"indent":[]}},{"type":"inlineCode","value":"Feature","position":{"start":{"line":3,"column":15,"offset":81},"end":{"line":3,"column":24,"offset":90},"indent":[]}},{"type":"text","value":" helper is very useful.  It can be loaded via the middleware style API ","position":{"start":{"line":3,"column":24,"offset":90},"end":{"line":3,"column":95,"offset":161},"indent":[]}},{"type":"inlineCode","value":"runtime.use","position":{"start":{"line":3,"column":95,"offset":161},"end":{"line":3,"column":108,"offset":174},"indent":[]}},{"type":"text","value":" or enabled directly thru ","position":{"start":{"line":3,"column":108,"offset":174},"end":{"line":3,"column":134,"offset":200},"indent":[]}},{"type":"inlineCode","value":"runtime.feature(\"feature-name\").enable()","position":{"start":{"line":3,"column":134,"offset":200},"end":{"line":3,"column":176,"offset":242},"indent":[]}},{"type":"text","value":".  Doing this gives us the opportunity to decorate the runtime, and create a shortcut to the interface for working with that particular feature.  A lot of interfaces are implemented as feature modules.","position":{"start":{"line":3,"column":176,"offset":242},"end":{"line":3,"column":377,"offset":443},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":67},"end":{"line":3,"column":377,"offset":443},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Each ","position":{"start":{"line":5,"column":1,"offset":445},"end":{"line":5,"column":6,"offset":450},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":5,"column":6,"offset":450},"end":{"line":5,"column":14,"offset":458},"indent":[]}},{"type":"text","value":" implementation is complicated, they must be registered, then ","position":{"start":{"line":5,"column":14,"offset":458},"end":{"line":5,"column":76,"offset":520},"indent":[]}},{"type":"inlineCode","value":"attached","position":{"start":{"line":5,"column":76,"offset":520},"end":{"line":5,"column":86,"offset":530},"indent":[]}},{"type":"text","value":", and then given an opportunity to decorate the runtime methods for working with those helpers.","position":{"start":{"line":5,"column":86,"offset":530},"end":{"line":5,"column":181,"offset":625},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":445},"end":{"line":5,"column":181,"offset":625},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Since the ","position":{"start":{"line":7,"column":1,"offset":627},"end":{"line":7,"column":11,"offset":637},"indent":[]}},{"type":"inlineCode","value":"Feature","position":{"start":{"line":7,"column":11,"offset":637},"end":{"line":7,"column":20,"offset":646},"indent":[]}},{"type":"text","value":" helper is the only one provided by default by Skypager, every ","position":{"start":{"line":7,"column":20,"offset":646},"end":{"line":7,"column":83,"offset":709},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":7,"column":83,"offset":709},"end":{"line":7,"column":91,"offset":717},"indent":[]}},{"type":"text","value":" implementation should expose a feature implementation that the runtime can enable.  It is in these feature models that the ","position":{"start":{"line":7,"column":91,"offset":717},"end":{"line":7,"column":215,"offset":841},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":7,"column":215,"offset":841},"end":{"line":7,"column":223,"offset":849},"indent":[]}},{"type":"text","value":" package can control how their interface behaves and how they wish to extend the runtime to provide shortcuts and conveniences for working with the individual ","position":{"start":{"line":7,"column":223,"offset":849},"end":{"line":7,"column":382,"offset":1008},"indent":[]}},{"type":"inlineCode","value":"Helpers","position":{"start":{"line":7,"column":382,"offset":1008},"end":{"line":7,"column":391,"offset":1017},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":627},"end":{"line":7,"column":391,"offset":1017},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Example:","position":{"start":{"line":9,"column":1,"offset":1019},"end":{"line":9,"column":9,"offset":1027},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":1019},"end":{"line":9,"column":9,"offset":1027},"indent":[]}},{"type":"code","lang":"javascript","value":"import skypager from 'skypager-runtime'\nimport commands from 'skypager-helpers-command'\nimport servers from 'skypager-helpers-server'\n\nexport const runtime = skypager\n  .use(commandHelper)\n  .use(serverHelper)\n\nexport default runtime","position":{"start":{"line":11,"column":1,"offset":1029},"end":{"line":21,"column":4,"offset":1280},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Add support for asynchronous module loading","position":{"start":{"line":23,"column":4,"offset":1285},"end":{"line":23,"column":47,"offset":1328},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1282},"end":{"line":23,"column":47,"offset":1328},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Either via ","position":{"start":{"line":25,"column":1,"offset":1330},"end":{"line":25,"column":12,"offset":1341},"indent":[]}},{"type":"inlineCode","value":"System.import","position":{"start":{"line":25,"column":12,"offset":1341},"end":{"line":25,"column":27,"offset":1356},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":25,"column":27,"offset":1356},"end":{"line":25,"column":31,"offset":1360},"indent":[]}},{"type":"inlineCode","value":"import","position":{"start":{"line":25,"column":31,"offset":1360},"end":{"line":25,"column":39,"offset":1368},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":25,"column":39,"offset":1368},"end":{"line":25,"column":43,"offset":1372},"indent":[]}},{"type":"inlineCode","value":"require.ensure","position":{"start":{"line":25,"column":43,"offset":1372},"end":{"line":25,"column":59,"offset":1388},"indent":[]}},{"type":"text","value":" or other ","position":{"start":{"line":25,"column":59,"offset":1388},"end":{"line":25,"column":69,"offset":1398},"indent":[]}},{"type":"inlineCode","value":"Promise","position":{"start":{"line":25,"column":69,"offset":1398},"end":{"line":25,"column":78,"offset":1407},"indent":[]}},{"type":"text","value":" API (e.g. Webpack bundle-loader)","position":{"start":{"line":25,"column":78,"offset":1407},"end":{"line":25,"column":111,"offset":1440},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1330},"end":{"line":25,"column":111,"offset":1440},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"A React Component Implementation synchronized with every Helper Instance","position":{"start":{"line":27,"column":4,"offset":1445},"end":{"line":27,"column":76,"offset":1517},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1442},"end":{"line":27,"column":76,"offset":1517},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ability to render the runtime and helper state as a React component tree.","position":{"start":{"line":29,"column":1,"offset":1519},"end":{"line":29,"column":78,"offset":1596},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1519},"end":{"line":29,"column":78,"offset":1596},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Using React Custom Renderers, we can render any state object in any form we wish.","position":{"start":{"line":31,"column":1,"offset":1598},"end":{"line":31,"column":82,"offset":1679},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1598},"end":{"line":31,"column":82,"offset":1679},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":32,"column":1,"offset":1680}}},"astHash":"b73c9b06ffd5a386500158eca156b485"},"desired-states/runtime-goals.md":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals/desired-states","base":"runtime-goals.md","ext":".md","name":"runtime-goals","path":"/Users/jon/Projects/skypager/src/design-goals/desired-states/runtime-goals.md","relative":"desired-states/runtime-goals.md","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":14047182,"size":24,"blocks":8,"atimeMs":1511406605000,"mtimeMs":1511406311000,"ctimeMs":1511406311000,"birthtimeMs":1511403874000,"atime":"2017-11-23T03:10:05.000Z","mtime":"2017-11-23T03:05:11.000Z","ctime":"2017-11-23T03:05:11.000Z","birthtime":"2017-11-23T02:24:34.000Z"},"extension":".md","mime":{"mimeType":"text/markdown"},"content":"# Desired Runtime State\n","hash":"e699137c49f1ab6c5417334031779217","ast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Desired Runtime State","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":24,"offset":23},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":24,"offset":23},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":2,"column":1,"offset":24}}},"astHash":"e699137c49f1ab6c5417334031779217"},"desired-states/runtimes/node-goals.md":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals/desired-states/runtimes","base":"node-goals.md","ext":".md","name":"node-goals","path":"/Users/jon/Projects/skypager/src/design-goals/desired-states/runtimes/node-goals.md","relative":"desired-states/runtimes/node-goals.md","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":14047184,"size":185,"blocks":8,"atimeMs":1511406389000,"mtimeMs":1511403874000,"ctimeMs":1511403874000,"birthtimeMs":1511403874000,"atime":"2017-11-23T03:06:29.000Z","mtime":"2017-11-23T02:24:34.000Z","ctime":"2017-11-23T02:24:34.000Z","birthtime":"2017-11-23T02:24:34.000Z"},"extension":".md","mime":{"mimeType":"text/markdown"},"content":"# Lazy load features\n\nRight now every feature is enabled every time the node runtime is used.  We should move this functionality into the `prepare` step of the commands that need them.\n","hash":"ca22053dc5eccc79454ada1692e90a95","ast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Lazy load features","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":21,"offset":20},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":21,"offset":20},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Right now every feature is enabled every time the node runtime is used.  We should move this functionality into the ","position":{"start":{"line":3,"column":1,"offset":22},"end":{"line":3,"column":117,"offset":138},"indent":[]}},{"type":"inlineCode","value":"prepare","position":{"start":{"line":3,"column":117,"offset":138},"end":{"line":3,"column":126,"offset":147},"indent":[]}},{"type":"text","value":" step of the commands that need them.","position":{"start":{"line":3,"column":126,"offset":147},"end":{"line":3,"column":163,"offset":184},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":22},"end":{"line":3,"column":163,"offset":184},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":4,"column":1,"offset":185}}},"astHash":"ca22053dc5eccc79454ada1692e90a95"},"editor.js":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals","base":"editor.js","ext":".js","name":"editor","path":"/Users/jon/Projects/skypager/src/design-goals/editor.js","relative":"editor.js","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":14047185,"size":26,"blocks":8,"atimeMs":1511406389000,"mtimeMs":1511403874000,"ctimeMs":1511403874000,"birthtimeMs":1511403874000,"atime":"2017-11-23T03:06:29.000Z","mtime":"2017-11-23T02:24:34.000Z","ctime":"2017-11-23T02:24:34.000Z","birthtime":"2017-11-23T02:24:34.000Z"},"extension":".js","mime":{"mimeType":"application/javascript"},"content":"const { skypager } = this\n","hash":"d8c9da584fb5239ad9aedd64aa190aab","ast":{"type":"File","start":0,"end":26,"loc":{"start":{"line":1,"column":0},"end":{"line":2,"column":0}},"program":{"type":"Program","start":0,"end":26,"loc":{"start":{"line":1,"column":0},"end":{"line":2,"column":0}},"sourceType":"module","body":[{"type":"VariableDeclaration","kind":"var","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","start":8,"end":16,"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":16},"identifierName":"skypager"},"name":"skypager"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"undefined","trailingComments":[],"leadingComments":[],"innerComments":[]},"property":{"type":"Identifier","start":8,"end":16,"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":16},"identifierName":"skypager"},"name":"skypager"},"computed":false}}],"trailingComments":[],"leadingComments":[],"innerComments":[]}],"directives":[{"type":"Directive","value":{"type":"DirectiveLiteral","value":"use strict"}}],"_letDone":true},"comments":[],"tokens":[{"type":{"label":"const","keyword":"const","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"const","start":0,"end":5,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":5}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":6,"end":7,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":7}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"skypager","start":8,"end":16,"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":16}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":17,"end":18,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":18}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":19,"end":20,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":20}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":21,"end":25,"loc":{"start":{"line":1,"column":21},"end":{"line":1,"column":25}}},{"type":{"label":"eof","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":26,"end":26,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":0}}}]},"astHash":"d8c9da584fb5239ad9aedd64aa190aab"},"helper-goals.md":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals","base":"helper-goals.md","ext":".md","name":"helper-goals","path":"/Users/jon/Projects/skypager/src/design-goals/helper-goals.md","relative":"helper-goals.md","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":13312842,"size":6881,"blocks":16,"atimeMs":1511406389000,"mtimeMs":1510637307000,"ctimeMs":1510637307000,"birthtimeMs":1510637307000,"atime":"2017-11-23T03:06:29.000Z","mtime":"2017-11-14T05:28:27.000Z","ctime":"2017-11-14T05:28:27.000Z","birthtime":"2017-11-14T05:28:27.000Z"},"extension":".md","mime":{"mimeType":"text/markdown"},"content":"# Helpers\n> Module classes which provide Inversion of Control power to skypager projects\n\nThe main goal behind the design of the `Runtime` and its `Helper Registry` system is to enable a convention over configuration style approach to developing JavaScript applications. By allowing developers to group, classify or categorize individual javascript modules based, usually on their names and location in the source code project, we can codify certain patterns and organize our source code to take advantage of this.\n\nThis requires developers to think in two contexts:\n\n**As a developer of common, reusable modules that can be re-used across multiple projects, in multiple environments. (Developing Runtime features, and Helper classes)**\n\nThis would let you do to define for example a `specific-project-runtime` module:\n\n```javascript\nimport runtime from 'skypager-runtimes-node'\nimport * as serverHelper from 'skypager-helpers-server'\n\nruntime.use(serverHelper)\n\nruntime.servers.register('webServer', () => require('./src/servers/webServer.js'))\nruntime.servers.register('apiServer', () => require('./src/servers/apiServer.js'))\n\n```\n\n**As a developer of specific projects and applications which are dynamically composed of these reusable modules.**\n\nI can define a runtime, and expect that certain features and modules are going to be loaded.\n\n```javascript\nimport runtime from 'specific-project-runtime'\n\nconst webServer = runtime.server('webServer', {\n  port: runtime.argv.webPort || 9000\n})\n\nconst apiServer = runtime.server('apiServer', {\n  port: runtime.argv.apiPort || 9001\n})\n\nasync function main() {\n  const { api, web } = runtime.argv\n\n  if (api) {\n    await apiServer.start()\n    console.log(`API Server started on port ${apiServer.port}`)\n  }\n\n  if (web) {\n    await webServer.start()\n    console.log(`Web Server started on port ${webServer.port}`)\n  }\n}\n\nmain()\n```\n\nThis program can be started by:\n\n```shell\n$ sky run /path-to-script.js --api --web\n```\n\nBy developing code in these two different contexts, one focuses on generic and reusable patterns and interfaces separately from their specific implementation and usage in a specific application deployment.\n\n## Helpers define patterns for groups of modules to adhere to\n\nConsider a source code project with the following structure\n\n- app/\n  - models/\n  - controllers/\n  - views/\n\nAs a developer when I am working on a file in `app/models` I want to be able to rely on certain model specific patterns to be automatically available to me. I expect that I will be required to put specific types of code in `app/models` and that this will be different type of code than `app/views`.\n\nAs the developer of the common runtime, I want to be able to assume that everything in `app/models` behaves in similar and consistent ways, and at the same time I want to be able to have many different models and specify only what is unique and different about them.\n\nFurther more, if i have two models one in a file named `app/models/book` and another in `app/models/author`. I'd like to be able to assume certain default values based on the file name alone.  This way I can say my author model `hasMany(\"books\")` and not have to worry about how or if the `books` model is loaded before doing so.\n\nThe same for `controllers` and `views`.  A `Helper` class is used to define what each of these specific types of modules can do, what individual modules need to specify, and what individual options they can customize.\n\nHelpers can query the project to find available providers.  The folder and file naming conventions is one way to automatically discover helpers, it is not a hard requirement.\n\n## Helpers can be cached / maintain state\n\nDepending on the type of helper, you may only want one living instance to be created.  For other types of helpers, there may not be any long lived state so this might not matter.\n\nHelper classes can specify this behavior about themselves.\n\nWhether Helper classes wish to behave as single instances, or whether many instances can be active, each helper can declare information about its own internal, observable state structures.\n\n## Helper Instances and the Runtime\n\nHelpers can be used the way you would any type of class based framework or library.\n\n```javascript\nimport { Server } from 'skypager-helpers-server'\n\nexport class MyCustomServer extends Server {\n\n}\n\nexport default MyCustomServer\n\nexport const create = (options = {}, context = {}) => {\n  return new MyCustomServer(options, context)\n}\n\nMyCustomServer.create = create\n```\n\nWhile good to know, using this pattern can lead to a lot more boilerplate.  The runtime is designed to eliminate this boilerplate.\n\n### Using Helper Registries to create helper instances\n\nSkypager Helper classes can be attached to an instance of a `Runtime`.  In doing so, creating a `Registry` for those specific types of modules.  A project can register named providers of a particular type of helper, so that they can be lazy loaded on demand by the runtime.\n\nThe idea is to preload the registry with metadata about which modules are available to it, without loading or depending on everything required to use that module at runtime.\n\nTo this end the runtime can query a particular registry to see everything that is available:\n\n```javascript\nimport runtime from 'skypager-runtime'\nimport * as myFeature from 'my-feature'\n\nruntime.register('myFeature', myFeature)\n\nconsole.log(runtime.features.available) // ['myFeature']\n```\n\nand when this particular module is needed, load it:\n\n```javascript\nconst myFeature = runtime.feature('myFeature')\n\nif (myFeature.isSupported) {\n  myFeature.enable()\n}\n```\n\nUsing the registry method allows the skypager `Runtime` to control the `options` and `context` data that gets passed down from the runtime to all of the helpers it creates.\n\n## Helpers can declare propTypes contextTypes\n\nSkypager provides default runtimes such as `node`, `development`, `web` and `electron`.  Each of these takes the generic `skypager-runtime` and extend it with different features and helpers that are useful in these runtimes.\n\nIn node, a runtime can be called in different environments (e.g. `process.env.NODE_ENV` equal to `production` or `development`) and the main process can be started with different command line flags (e.g. `skypager start webServer --port 9000 --hostname localhost`).\n\nWhen the runtime is `initialized` and then `started` it can take advantage of this information to control how it boots up, for example by controlling which helpers it creates and starts.  As the the runtime and each of the helpers go through their lifecycle, they will rely on `options` and `context` properties which can be either specified at runtime in our code.\n\nIt is best when these values can or inferred by environmental factors (e.g the current `process.cwd()` or by parsing a `package.json` file found in the current `process.cwd()`)\n","hash":"828ba2f9f88c4c201c537eddd0f2c843","ast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Helpers","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":10,"offset":9},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":10,"offset":9},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Module classes which provide Inversion of Control power to skypager projects","position":{"start":{"line":2,"column":3,"offset":12},"end":{"line":2,"column":79,"offset":88},"indent":[]}}],"position":{"start":{"line":2,"column":3,"offset":12},"end":{"line":2,"column":79,"offset":88},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":10},"end":{"line":2,"column":79,"offset":88},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The main goal behind the design of the ","position":{"start":{"line":4,"column":1,"offset":90},"end":{"line":4,"column":40,"offset":129},"indent":[]}},{"type":"inlineCode","value":"Runtime","position":{"start":{"line":4,"column":40,"offset":129},"end":{"line":4,"column":49,"offset":138},"indent":[]}},{"type":"text","value":" and its ","position":{"start":{"line":4,"column":49,"offset":138},"end":{"line":4,"column":58,"offset":147},"indent":[]}},{"type":"inlineCode","value":"Helper Registry","position":{"start":{"line":4,"column":58,"offset":147},"end":{"line":4,"column":75,"offset":164},"indent":[]}},{"type":"text","value":" system is to enable a convention over configuration style approach to developing JavaScript applications. By allowing developers to group, classify or categorize individual javascript modules based, usually on their names and location in the source code project, we can codify certain patterns and organize our source code to take advantage of this.","position":{"start":{"line":4,"column":75,"offset":164},"end":{"line":4,"column":425,"offset":514},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":90},"end":{"line":4,"column":425,"offset":514},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This requires developers to think in two contexts:","position":{"start":{"line":6,"column":1,"offset":516},"end":{"line":6,"column":51,"offset":566},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":516},"end":{"line":6,"column":51,"offset":566},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"As a developer of common, reusable modules that can be re-used across multiple projects, in multiple environments. (Developing Runtime features, and Helper classes)","position":{"start":{"line":8,"column":3,"offset":570},"end":{"line":8,"column":167,"offset":734},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":568},"end":{"line":8,"column":169,"offset":736},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":568},"end":{"line":8,"column":169,"offset":736},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This would let you do to define for example a ","position":{"start":{"line":10,"column":1,"offset":738},"end":{"line":10,"column":47,"offset":784},"indent":[]}},{"type":"inlineCode","value":"specific-project-runtime","position":{"start":{"line":10,"column":47,"offset":784},"end":{"line":10,"column":73,"offset":810},"indent":[]}},{"type":"text","value":" module:","position":{"start":{"line":10,"column":73,"offset":810},"end":{"line":10,"column":81,"offset":818},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":738},"end":{"line":10,"column":81,"offset":818},"indent":[]}},{"type":"code","lang":"javascript","value":"import runtime from 'skypager-runtimes-node'\nimport * as serverHelper from 'skypager-helpers-server'\n\nruntime.use(serverHelper)\n\nruntime.servers.register('webServer', () => require('./src/servers/webServer.js'))\nruntime.servers.register('apiServer', () => require('./src/servers/apiServer.js'))","position":{"start":{"line":12,"column":1,"offset":820},"end":{"line":21,"column":4,"offset":1133},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"As a developer of specific projects and applications which are dynamically composed of these reusable modules.","position":{"start":{"line":23,"column":3,"offset":1137},"end":{"line":23,"column":113,"offset":1247},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1135},"end":{"line":23,"column":115,"offset":1249},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1135},"end":{"line":23,"column":115,"offset":1249},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I can define a runtime, and expect that certain features and modules are going to be loaded.","position":{"start":{"line":25,"column":1,"offset":1251},"end":{"line":25,"column":93,"offset":1343},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1251},"end":{"line":25,"column":93,"offset":1343},"indent":[]}},{"type":"code","lang":"javascript","value":"import runtime from 'specific-project-runtime'\n\nconst webServer = runtime.server('webServer', {\n  port: runtime.argv.webPort || 9000\n})\n\nconst apiServer = runtime.server('apiServer', {\n  port: runtime.argv.apiPort || 9001\n})\n\nasync function main() {\n  const { api, web } = runtime.argv\n\n  if (api) {\n    await apiServer.start()\n    console.log(`API Server started on port ${apiServer.port}`)\n  }\n\n  if (web) {\n    await webServer.start()\n    console.log(`Web Server started on port ${webServer.port}`)\n  }\n}\n\nmain()","position":{"start":{"line":27,"column":1,"offset":1345},"end":{"line":53,"column":4,"offset":1878},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This program can be started by:","position":{"start":{"line":55,"column":1,"offset":1880},"end":{"line":55,"column":32,"offset":1911},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":1880},"end":{"line":55,"column":32,"offset":1911},"indent":[]}},{"type":"code","lang":"shell","value":"$ sky run /path-to-script.js --api --web","position":{"start":{"line":57,"column":1,"offset":1913},"end":{"line":59,"column":4,"offset":1966},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"By developing code in these two different contexts, one focuses on generic and reusable patterns and interfaces separately from their specific implementation and usage in a specific application deployment.","position":{"start":{"line":61,"column":1,"offset":1968},"end":{"line":61,"column":206,"offset":2173},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":1968},"end":{"line":61,"column":206,"offset":2173},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Helpers define patterns for groups of modules to adhere to","position":{"start":{"line":63,"column":4,"offset":2178},"end":{"line":63,"column":62,"offset":2236},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":2175},"end":{"line":63,"column":62,"offset":2236},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Consider a source code project with the following structure","position":{"start":{"line":65,"column":1,"offset":2238},"end":{"line":65,"column":60,"offset":2297},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2238},"end":{"line":65,"column":60,"offset":2297},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"app/","position":{"start":{"line":67,"column":3,"offset":2301},"end":{"line":67,"column":7,"offset":2305},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":2301},"end":{"line":67,"column":7,"offset":2305},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"models/","position":{"start":{"line":68,"column":5,"offset":2310},"end":{"line":68,"column":12,"offset":2317},"indent":[]}}],"position":{"start":{"line":68,"column":5,"offset":2310},"end":{"line":68,"column":12,"offset":2317},"indent":[]}}],"position":{"start":{"line":68,"column":3,"offset":2308},"end":{"line":68,"column":12,"offset":2317},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"controllers/","position":{"start":{"line":69,"column":5,"offset":2322},"end":{"line":69,"column":17,"offset":2334},"indent":[]}}],"position":{"start":{"line":69,"column":5,"offset":2322},"end":{"line":69,"column":17,"offset":2334},"indent":[]}}],"position":{"start":{"line":69,"column":3,"offset":2320},"end":{"line":69,"column":17,"offset":2334},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"views/","position":{"start":{"line":70,"column":5,"offset":2339},"end":{"line":70,"column":11,"offset":2345},"indent":[]}}],"position":{"start":{"line":70,"column":5,"offset":2339},"end":{"line":70,"column":11,"offset":2345},"indent":[]}}],"position":{"start":{"line":70,"column":3,"offset":2337},"end":{"line":70,"column":11,"offset":2345},"indent":[]}}],"position":{"start":{"line":68,"column":3,"offset":2308},"end":{"line":70,"column":11,"offset":2345},"indent":[3,3]}}],"position":{"start":{"line":67,"column":1,"offset":2299},"end":{"line":70,"column":11,"offset":2345},"indent":[1,1,1]}}],"position":{"start":{"line":67,"column":1,"offset":2299},"end":{"line":70,"column":11,"offset":2345},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"As a developer when I am working on a file in ","position":{"start":{"line":72,"column":1,"offset":2347},"end":{"line":72,"column":47,"offset":2393},"indent":[]}},{"type":"inlineCode","value":"app/models","position":{"start":{"line":72,"column":47,"offset":2393},"end":{"line":72,"column":59,"offset":2405},"indent":[]}},{"type":"text","value":" I want to be able to rely on certain model specific patterns to be automatically available to me. I expect that I will be required to put specific types of code in ","position":{"start":{"line":72,"column":59,"offset":2405},"end":{"line":72,"column":224,"offset":2570},"indent":[]}},{"type":"inlineCode","value":"app/models","position":{"start":{"line":72,"column":224,"offset":2570},"end":{"line":72,"column":236,"offset":2582},"indent":[]}},{"type":"text","value":" and that this will be different type of code than ","position":{"start":{"line":72,"column":236,"offset":2582},"end":{"line":72,"column":287,"offset":2633},"indent":[]}},{"type":"inlineCode","value":"app/views","position":{"start":{"line":72,"column":287,"offset":2633},"end":{"line":72,"column":298,"offset":2644},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":72,"column":298,"offset":2644},"end":{"line":72,"column":299,"offset":2645},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":2347},"end":{"line":72,"column":299,"offset":2645},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As the developer of the common runtime, I want to be able to assume that everything in ","position":{"start":{"line":74,"column":1,"offset":2647},"end":{"line":74,"column":88,"offset":2734},"indent":[]}},{"type":"inlineCode","value":"app/models","position":{"start":{"line":74,"column":88,"offset":2734},"end":{"line":74,"column":100,"offset":2746},"indent":[]}},{"type":"text","value":" behaves in similar and consistent ways, and at the same time I want to be able to have many different models and specify only what is unique and different about them.","position":{"start":{"line":74,"column":100,"offset":2746},"end":{"line":74,"column":267,"offset":2913},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":2647},"end":{"line":74,"column":267,"offset":2913},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Further more, if i have two models one in a file named ","position":{"start":{"line":76,"column":1,"offset":2915},"end":{"line":76,"column":56,"offset":2970},"indent":[]}},{"type":"inlineCode","value":"app/models/book","position":{"start":{"line":76,"column":56,"offset":2970},"end":{"line":76,"column":73,"offset":2987},"indent":[]}},{"type":"text","value":" and another in ","position":{"start":{"line":76,"column":73,"offset":2987},"end":{"line":76,"column":89,"offset":3003},"indent":[]}},{"type":"inlineCode","value":"app/models/author","position":{"start":{"line":76,"column":89,"offset":3003},"end":{"line":76,"column":108,"offset":3022},"indent":[]}},{"type":"text","value":". I'd like to be able to assume certain default values based on the file name alone.  This way I can say my author model ","position":{"start":{"line":76,"column":108,"offset":3022},"end":{"line":76,"column":229,"offset":3143},"indent":[]}},{"type":"inlineCode","value":"hasMany(\"books\")","position":{"start":{"line":76,"column":229,"offset":3143},"end":{"line":76,"column":247,"offset":3161},"indent":[]}},{"type":"text","value":" and not have to worry about how or if the ","position":{"start":{"line":76,"column":247,"offset":3161},"end":{"line":76,"column":290,"offset":3204},"indent":[]}},{"type":"inlineCode","value":"books","position":{"start":{"line":76,"column":290,"offset":3204},"end":{"line":76,"column":297,"offset":3211},"indent":[]}},{"type":"text","value":" model is loaded before doing so.","position":{"start":{"line":76,"column":297,"offset":3211},"end":{"line":76,"column":330,"offset":3244},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":2915},"end":{"line":76,"column":330,"offset":3244},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The same for ","position":{"start":{"line":78,"column":1,"offset":3246},"end":{"line":78,"column":14,"offset":3259},"indent":[]}},{"type":"inlineCode","value":"controllers","position":{"start":{"line":78,"column":14,"offset":3259},"end":{"line":78,"column":27,"offset":3272},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":78,"column":27,"offset":3272},"end":{"line":78,"column":32,"offset":3277},"indent":[]}},{"type":"inlineCode","value":"views","position":{"start":{"line":78,"column":32,"offset":3277},"end":{"line":78,"column":39,"offset":3284},"indent":[]}},{"type":"text","value":".  A ","position":{"start":{"line":78,"column":39,"offset":3284},"end":{"line":78,"column":44,"offset":3289},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":78,"column":44,"offset":3289},"end":{"line":78,"column":52,"offset":3297},"indent":[]}},{"type":"text","value":" class is used to define what each of these specific types of modules can do, what individual modules need to specify, and what individual options they can customize.","position":{"start":{"line":78,"column":52,"offset":3297},"end":{"line":78,"column":218,"offset":3463},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":3246},"end":{"line":78,"column":218,"offset":3463},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Helpers can query the project to find available providers.  The folder and file naming conventions is one way to automatically discover helpers, it is not a hard requirement.","position":{"start":{"line":80,"column":1,"offset":3465},"end":{"line":80,"column":175,"offset":3639},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":3465},"end":{"line":80,"column":175,"offset":3639},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Helpers can be cached / maintain state","position":{"start":{"line":82,"column":4,"offset":3644},"end":{"line":82,"column":42,"offset":3682},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":3641},"end":{"line":82,"column":42,"offset":3682},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Depending on the type of helper, you may only want one living instance to be created.  For other types of helpers, there may not be any long lived state so this might not matter.","position":{"start":{"line":84,"column":1,"offset":3684},"end":{"line":84,"column":179,"offset":3862},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":3684},"end":{"line":84,"column":179,"offset":3862},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Helper classes can specify this behavior about themselves.","position":{"start":{"line":86,"column":1,"offset":3864},"end":{"line":86,"column":59,"offset":3922},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":3864},"end":{"line":86,"column":59,"offset":3922},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Whether Helper classes wish to behave as single instances, or whether many instances can be active, each helper can declare information about its own internal, observable state structures.","position":{"start":{"line":88,"column":1,"offset":3924},"end":{"line":88,"column":189,"offset":4112},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":3924},"end":{"line":88,"column":189,"offset":4112},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Helper Instances and the Runtime","position":{"start":{"line":90,"column":4,"offset":4117},"end":{"line":90,"column":36,"offset":4149},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":4114},"end":{"line":90,"column":36,"offset":4149},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Helpers can be used the way you would any type of class based framework or library.","position":{"start":{"line":92,"column":1,"offset":4151},"end":{"line":92,"column":84,"offset":4234},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":4151},"end":{"line":92,"column":84,"offset":4234},"indent":[]}},{"type":"code","lang":"javascript","value":"import { Server } from 'skypager-helpers-server'\n\nexport class MyCustomServer extends Server {\n\n}\n\nexport default MyCustomServer\n\nexport const create = (options = {}, context = {}) => {\n  return new MyCustomServer(options, context)\n}\n\nMyCustomServer.create = create","position":{"start":{"line":94,"column":1,"offset":4236},"end":{"line":108,"column":4,"offset":4519},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"While good to know, using this pattern can lead to a lot more boilerplate.  The runtime is designed to eliminate this boilerplate.","position":{"start":{"line":110,"column":1,"offset":4521},"end":{"line":110,"column":131,"offset":4651},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":4521},"end":{"line":110,"column":131,"offset":4651},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Using Helper Registries to create helper instances","position":{"start":{"line":112,"column":5,"offset":4657},"end":{"line":112,"column":55,"offset":4707},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":4653},"end":{"line":112,"column":55,"offset":4707},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Skypager Helper classes can be attached to an instance of a ","position":{"start":{"line":114,"column":1,"offset":4709},"end":{"line":114,"column":61,"offset":4769},"indent":[]}},{"type":"inlineCode","value":"Runtime","position":{"start":{"line":114,"column":61,"offset":4769},"end":{"line":114,"column":70,"offset":4778},"indent":[]}},{"type":"text","value":".  In doing so, creating a ","position":{"start":{"line":114,"column":70,"offset":4778},"end":{"line":114,"column":97,"offset":4805},"indent":[]}},{"type":"inlineCode","value":"Registry","position":{"start":{"line":114,"column":97,"offset":4805},"end":{"line":114,"column":107,"offset":4815},"indent":[]}},{"type":"text","value":" for those specific types of modules.  A project can register named providers of a particular type of helper, so that they can be lazy loaded on demand by the runtime.","position":{"start":{"line":114,"column":107,"offset":4815},"end":{"line":114,"column":274,"offset":4982},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":4709},"end":{"line":114,"column":274,"offset":4982},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The idea is to preload the registry with metadata about which modules are available to it, without loading or depending on everything required to use that module at runtime.","position":{"start":{"line":116,"column":1,"offset":4984},"end":{"line":116,"column":174,"offset":5157},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":4984},"end":{"line":116,"column":174,"offset":5157},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To this end the runtime can query a particular registry to see everything that is available:","position":{"start":{"line":118,"column":1,"offset":5159},"end":{"line":118,"column":93,"offset":5251},"indent":[]}}],"position":{"start":{"line":118,"column":1,"offset":5159},"end":{"line":118,"column":93,"offset":5251},"indent":[]}},{"type":"code","lang":"javascript","value":"import runtime from 'skypager-runtime'\nimport * as myFeature from 'my-feature'\n\nruntime.register('myFeature', myFeature)\n\nconsole.log(runtime.features.available) // ['myFeature']","position":{"start":{"line":120,"column":1,"offset":5253},"end":{"line":127,"column":4,"offset":5449},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"and when this particular module is needed, load it:","position":{"start":{"line":129,"column":1,"offset":5451},"end":{"line":129,"column":52,"offset":5502},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":5451},"end":{"line":129,"column":52,"offset":5502},"indent":[]}},{"type":"code","lang":"javascript","value":"const myFeature = runtime.feature('myFeature')\n\nif (myFeature.isSupported) {\n  myFeature.enable()\n}","position":{"start":{"line":131,"column":1,"offset":5504},"end":{"line":137,"column":4,"offset":5621},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Using the registry method allows the skypager ","position":{"start":{"line":139,"column":1,"offset":5623},"end":{"line":139,"column":47,"offset":5669},"indent":[]}},{"type":"inlineCode","value":"Runtime","position":{"start":{"line":139,"column":47,"offset":5669},"end":{"line":139,"column":56,"offset":5678},"indent":[]}},{"type":"text","value":" to control the ","position":{"start":{"line":139,"column":56,"offset":5678},"end":{"line":139,"column":72,"offset":5694},"indent":[]}},{"type":"inlineCode","value":"options","position":{"start":{"line":139,"column":72,"offset":5694},"end":{"line":139,"column":81,"offset":5703},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":139,"column":81,"offset":5703},"end":{"line":139,"column":86,"offset":5708},"indent":[]}},{"type":"inlineCode","value":"context","position":{"start":{"line":139,"column":86,"offset":5708},"end":{"line":139,"column":95,"offset":5717},"indent":[]}},{"type":"text","value":" data that gets passed down from the runtime to all of the helpers it creates.","position":{"start":{"line":139,"column":95,"offset":5717},"end":{"line":139,"column":173,"offset":5795},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":5623},"end":{"line":139,"column":173,"offset":5795},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Helpers can declare propTypes contextTypes","position":{"start":{"line":141,"column":4,"offset":5800},"end":{"line":141,"column":46,"offset":5842},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":5797},"end":{"line":141,"column":46,"offset":5842},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Skypager provides default runtimes such as ","position":{"start":{"line":143,"column":1,"offset":5844},"end":{"line":143,"column":44,"offset":5887},"indent":[]}},{"type":"inlineCode","value":"node","position":{"start":{"line":143,"column":44,"offset":5887},"end":{"line":143,"column":50,"offset":5893},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":143,"column":50,"offset":5893},"end":{"line":143,"column":52,"offset":5895},"indent":[]}},{"type":"inlineCode","value":"development","position":{"start":{"line":143,"column":52,"offset":5895},"end":{"line":143,"column":65,"offset":5908},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":143,"column":65,"offset":5908},"end":{"line":143,"column":67,"offset":5910},"indent":[]}},{"type":"inlineCode","value":"web","position":{"start":{"line":143,"column":67,"offset":5910},"end":{"line":143,"column":72,"offset":5915},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":143,"column":72,"offset":5915},"end":{"line":143,"column":77,"offset":5920},"indent":[]}},{"type":"inlineCode","value":"electron","position":{"start":{"line":143,"column":77,"offset":5920},"end":{"line":143,"column":87,"offset":5930},"indent":[]}},{"type":"text","value":".  Each of these takes the generic ","position":{"start":{"line":143,"column":87,"offset":5930},"end":{"line":143,"column":122,"offset":5965},"indent":[]}},{"type":"inlineCode","value":"skypager-runtime","position":{"start":{"line":143,"column":122,"offset":5965},"end":{"line":143,"column":140,"offset":5983},"indent":[]}},{"type":"text","value":" and extend it with different features and helpers that are useful in these runtimes.","position":{"start":{"line":143,"column":140,"offset":5983},"end":{"line":143,"column":225,"offset":6068},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":5844},"end":{"line":143,"column":225,"offset":6068},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In node, a runtime can be called in different environments (e.g. ","position":{"start":{"line":145,"column":1,"offset":6070},"end":{"line":145,"column":66,"offset":6135},"indent":[]}},{"type":"inlineCode","value":"process.env.NODE_ENV","position":{"start":{"line":145,"column":66,"offset":6135},"end":{"line":145,"column":88,"offset":6157},"indent":[]}},{"type":"text","value":" equal to ","position":{"start":{"line":145,"column":88,"offset":6157},"end":{"line":145,"column":98,"offset":6167},"indent":[]}},{"type":"inlineCode","value":"production","position":{"start":{"line":145,"column":98,"offset":6167},"end":{"line":145,"column":110,"offset":6179},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":145,"column":110,"offset":6179},"end":{"line":145,"column":114,"offset":6183},"indent":[]}},{"type":"inlineCode","value":"development","position":{"start":{"line":145,"column":114,"offset":6183},"end":{"line":145,"column":127,"offset":6196},"indent":[]}},{"type":"text","value":") and the main process can be started with different command line flags (e.g. ","position":{"start":{"line":145,"column":127,"offset":6196},"end":{"line":145,"column":205,"offset":6274},"indent":[]}},{"type":"inlineCode","value":"skypager start webServer --port 9000 --hostname localhost","position":{"start":{"line":145,"column":205,"offset":6274},"end":{"line":145,"column":264,"offset":6333},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":145,"column":264,"offset":6333},"end":{"line":145,"column":266,"offset":6335},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":6070},"end":{"line":145,"column":266,"offset":6335},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When the runtime is ","position":{"start":{"line":147,"column":1,"offset":6337},"end":{"line":147,"column":21,"offset":6357},"indent":[]}},{"type":"inlineCode","value":"initialized","position":{"start":{"line":147,"column":21,"offset":6357},"end":{"line":147,"column":34,"offset":6370},"indent":[]}},{"type":"text","value":" and then ","position":{"start":{"line":147,"column":34,"offset":6370},"end":{"line":147,"column":44,"offset":6380},"indent":[]}},{"type":"inlineCode","value":"started","position":{"start":{"line":147,"column":44,"offset":6380},"end":{"line":147,"column":53,"offset":6389},"indent":[]}},{"type":"text","value":" it can take advantage of this information to control how it boots up, for example by controlling which helpers it creates and starts.  As the the runtime and each of the helpers go through their lifecycle, they will rely on ","position":{"start":{"line":147,"column":53,"offset":6389},"end":{"line":147,"column":278,"offset":6614},"indent":[]}},{"type":"inlineCode","value":"options","position":{"start":{"line":147,"column":278,"offset":6614},"end":{"line":147,"column":287,"offset":6623},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":147,"column":287,"offset":6623},"end":{"line":147,"column":292,"offset":6628},"indent":[]}},{"type":"inlineCode","value":"context","position":{"start":{"line":147,"column":292,"offset":6628},"end":{"line":147,"column":301,"offset":6637},"indent":[]}},{"type":"text","value":" properties which can be either specified at runtime in our code.","position":{"start":{"line":147,"column":301,"offset":6637},"end":{"line":147,"column":366,"offset":6702},"indent":[]}}],"position":{"start":{"line":147,"column":1,"offset":6337},"end":{"line":147,"column":366,"offset":6702},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"It is best when these values can or inferred by environmental factors (e.g the current ","position":{"start":{"line":149,"column":1,"offset":6704},"end":{"line":149,"column":88,"offset":6791},"indent":[]}},{"type":"inlineCode","value":"process.cwd()","position":{"start":{"line":149,"column":88,"offset":6791},"end":{"line":149,"column":103,"offset":6806},"indent":[]}},{"type":"text","value":" or by parsing a ","position":{"start":{"line":149,"column":103,"offset":6806},"end":{"line":149,"column":120,"offset":6823},"indent":[]}},{"type":"inlineCode","value":"package.json","position":{"start":{"line":149,"column":120,"offset":6823},"end":{"line":149,"column":134,"offset":6837},"indent":[]}},{"type":"text","value":" file found in the current ","position":{"start":{"line":149,"column":134,"offset":6837},"end":{"line":149,"column":161,"offset":6864},"indent":[]}},{"type":"inlineCode","value":"process.cwd()","position":{"start":{"line":149,"column":161,"offset":6864},"end":{"line":149,"column":176,"offset":6879},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":149,"column":176,"offset":6879},"end":{"line":149,"column":177,"offset":6880},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":6704},"end":{"line":149,"column":177,"offset":6880},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":150,"column":1,"offset":6881}}},"astHash":"828ba2f9f88c4c201c537eddd0f2c843"},"observable-goals.md":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals","base":"observable-goals.md","ext":".md","name":"observable-goals","path":"/Users/jon/Projects/skypager/src/design-goals/observable-goals.md","relative":"observable-goals.md","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":13312843,"size":2440,"blocks":8,"atimeMs":1511406389000,"mtimeMs":1510637307000,"ctimeMs":1510637307000,"birthtimeMs":1510637307000,"atime":"2017-11-23T03:06:29.000Z","mtime":"2017-11-14T05:28:27.000Z","ctime":"2017-11-14T05:28:27.000Z","birthtime":"2017-11-14T05:28:27.000Z"},"extension":".md","mime":{"mimeType":"text/markdown"},"content":"# Observables\n\nThe `Runtime` and potentially different `Helper` classes each are able to take advantage of the `mobx` library and the various `observable` data structures they provide, along with helpers for `computed` properties and flux style `actions` which are used to mutate observable state.\n\n## Runtime State\n\nBy default, the `Runtime` singleton will have a `state` property which is an instance of the `mobx` library `observable.shallowMap` object.  There will be a `currentState` property that is a `computed` property that contains a JSON representation of the entire runtime `state` object.\n\nA `runtime` will expose an `observe` function which accepts a function that will be called any time there is an update to the `state` observable.\n\nA `runtime` will emit a `change` event any time the state changes.\n\nWhen an individual `state` property changes, the runtime will emit a change event for that property.\n\nFor example:\n\n```javascript\nimport runtime from 'skypager-runtime'\n\nruntime.on('currentUserDidChangeState', () => {\n  const { currentUser } = runtime.currentState\n  runtime.setState({ loggedIn: !!currentUser })\n  console.log('Logged In')\n})\n\nruntime.login = (email, password) =>\n  const currentUser = runtime.authentication.lookup(email).validate(password)\n  runtime.setState({ currentUser })\n\nruntime.login('jon@chicago.com', 'hello')\n// Logged In\n```\n\n## Helper State\n\nEach helper class can define its own observable attributes.  For example, the `Server` helper class declares that it has an observable `status`.  Whenever the server is `started` or `stopped` the instance calls `setState({ status: 'started' })`.\n\n## Observable Utils\n\nThe `mobx` library makes working with different types of observable objects quite developer friendly.  Almost any type of observable object can be created by combining several smaller ones.  This leaves developer with a lot of creativity.\n\nTo help this, the runtime makes it easy to declare a schema for types of observables, and create them when needed at runtime.  Also, as you develop your own custom `Helpers` or `Features` being able to rely on observable's APIs means you have all that power at your fingertips by default through the global runtime itself.\n\n## Mobx is globally available via the runtime\n\nSince `mobx` is so useful, you can automatically access the module via `runtime.mobx`.  You don't need to include this library in your javascript bundle this way either.\n","hash":"03078710c6a1f0a4a4f5dfc93d319f50","ast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Observables","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":14,"offset":13},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":14,"offset":13},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":3,"column":1,"offset":15},"end":{"line":3,"column":5,"offset":19},"indent":[]}},{"type":"inlineCode","value":"Runtime","position":{"start":{"line":3,"column":5,"offset":19},"end":{"line":3,"column":14,"offset":28},"indent":[]}},{"type":"text","value":" and potentially different ","position":{"start":{"line":3,"column":14,"offset":28},"end":{"line":3,"column":41,"offset":55},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":3,"column":41,"offset":55},"end":{"line":3,"column":49,"offset":63},"indent":[]}},{"type":"text","value":" classes each are able to take advantage of the ","position":{"start":{"line":3,"column":49,"offset":63},"end":{"line":3,"column":97,"offset":111},"indent":[]}},{"type":"inlineCode","value":"mobx","position":{"start":{"line":3,"column":97,"offset":111},"end":{"line":3,"column":103,"offset":117},"indent":[]}},{"type":"text","value":" library and the various ","position":{"start":{"line":3,"column":103,"offset":117},"end":{"line":3,"column":128,"offset":142},"indent":[]}},{"type":"inlineCode","value":"observable","position":{"start":{"line":3,"column":128,"offset":142},"end":{"line":3,"column":140,"offset":154},"indent":[]}},{"type":"text","value":" data structures they provide, along with helpers for ","position":{"start":{"line":3,"column":140,"offset":154},"end":{"line":3,"column":194,"offset":208},"indent":[]}},{"type":"inlineCode","value":"computed","position":{"start":{"line":3,"column":194,"offset":208},"end":{"line":3,"column":204,"offset":218},"indent":[]}},{"type":"text","value":" properties and flux style ","position":{"start":{"line":3,"column":204,"offset":218},"end":{"line":3,"column":231,"offset":245},"indent":[]}},{"type":"inlineCode","value":"actions","position":{"start":{"line":3,"column":231,"offset":245},"end":{"line":3,"column":240,"offset":254},"indent":[]}},{"type":"text","value":" which are used to mutate observable state.","position":{"start":{"line":3,"column":240,"offset":254},"end":{"line":3,"column":283,"offset":297},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":15},"end":{"line":3,"column":283,"offset":297},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Runtime State","position":{"start":{"line":5,"column":4,"offset":302},"end":{"line":5,"column":17,"offset":315},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":299},"end":{"line":5,"column":17,"offset":315},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"By default, the ","position":{"start":{"line":7,"column":1,"offset":317},"end":{"line":7,"column":17,"offset":333},"indent":[]}},{"type":"inlineCode","value":"Runtime","position":{"start":{"line":7,"column":17,"offset":333},"end":{"line":7,"column":26,"offset":342},"indent":[]}},{"type":"text","value":" singleton will have a ","position":{"start":{"line":7,"column":26,"offset":342},"end":{"line":7,"column":49,"offset":365},"indent":[]}},{"type":"inlineCode","value":"state","position":{"start":{"line":7,"column":49,"offset":365},"end":{"line":7,"column":56,"offset":372},"indent":[]}},{"type":"text","value":" property which is an instance of the ","position":{"start":{"line":7,"column":56,"offset":372},"end":{"line":7,"column":94,"offset":410},"indent":[]}},{"type":"inlineCode","value":"mobx","position":{"start":{"line":7,"column":94,"offset":410},"end":{"line":7,"column":100,"offset":416},"indent":[]}},{"type":"text","value":" library ","position":{"start":{"line":7,"column":100,"offset":416},"end":{"line":7,"column":109,"offset":425},"indent":[]}},{"type":"inlineCode","value":"observable.shallowMap","position":{"start":{"line":7,"column":109,"offset":425},"end":{"line":7,"column":132,"offset":448},"indent":[]}},{"type":"text","value":" object.  There will be a ","position":{"start":{"line":7,"column":132,"offset":448},"end":{"line":7,"column":158,"offset":474},"indent":[]}},{"type":"inlineCode","value":"currentState","position":{"start":{"line":7,"column":158,"offset":474},"end":{"line":7,"column":172,"offset":488},"indent":[]}},{"type":"text","value":" property that is a ","position":{"start":{"line":7,"column":172,"offset":488},"end":{"line":7,"column":192,"offset":508},"indent":[]}},{"type":"inlineCode","value":"computed","position":{"start":{"line":7,"column":192,"offset":508},"end":{"line":7,"column":202,"offset":518},"indent":[]}},{"type":"text","value":" property that contains a JSON representation of the entire runtime ","position":{"start":{"line":7,"column":202,"offset":518},"end":{"line":7,"column":270,"offset":586},"indent":[]}},{"type":"inlineCode","value":"state","position":{"start":{"line":7,"column":270,"offset":586},"end":{"line":7,"column":277,"offset":593},"indent":[]}},{"type":"text","value":" object.","position":{"start":{"line":7,"column":277,"offset":593},"end":{"line":7,"column":285,"offset":601},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":317},"end":{"line":7,"column":285,"offset":601},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":9,"column":1,"offset":603},"end":{"line":9,"column":3,"offset":605},"indent":[]}},{"type":"inlineCode","value":"runtime","position":{"start":{"line":9,"column":3,"offset":605},"end":{"line":9,"column":12,"offset":614},"indent":[]}},{"type":"text","value":" will expose an ","position":{"start":{"line":9,"column":12,"offset":614},"end":{"line":9,"column":28,"offset":630},"indent":[]}},{"type":"inlineCode","value":"observe","position":{"start":{"line":9,"column":28,"offset":630},"end":{"line":9,"column":37,"offset":639},"indent":[]}},{"type":"text","value":" function which accepts a function that will be called any time there is an update to the ","position":{"start":{"line":9,"column":37,"offset":639},"end":{"line":9,"column":127,"offset":729},"indent":[]}},{"type":"inlineCode","value":"state","position":{"start":{"line":9,"column":127,"offset":729},"end":{"line":9,"column":134,"offset":736},"indent":[]}},{"type":"text","value":" observable.","position":{"start":{"line":9,"column":134,"offset":736},"end":{"line":9,"column":146,"offset":748},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":603},"end":{"line":9,"column":146,"offset":748},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":11,"column":1,"offset":750},"end":{"line":11,"column":3,"offset":752},"indent":[]}},{"type":"inlineCode","value":"runtime","position":{"start":{"line":11,"column":3,"offset":752},"end":{"line":11,"column":12,"offset":761},"indent":[]}},{"type":"text","value":" will emit a ","position":{"start":{"line":11,"column":12,"offset":761},"end":{"line":11,"column":25,"offset":774},"indent":[]}},{"type":"inlineCode","value":"change","position":{"start":{"line":11,"column":25,"offset":774},"end":{"line":11,"column":33,"offset":782},"indent":[]}},{"type":"text","value":" event any time the state changes.","position":{"start":{"line":11,"column":33,"offset":782},"end":{"line":11,"column":67,"offset":816},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":750},"end":{"line":11,"column":67,"offset":816},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When an individual ","position":{"start":{"line":13,"column":1,"offset":818},"end":{"line":13,"column":20,"offset":837},"indent":[]}},{"type":"inlineCode","value":"state","position":{"start":{"line":13,"column":20,"offset":837},"end":{"line":13,"column":27,"offset":844},"indent":[]}},{"type":"text","value":" property changes, the runtime will emit a change event for that property.","position":{"start":{"line":13,"column":27,"offset":844},"end":{"line":13,"column":101,"offset":918},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":818},"end":{"line":13,"column":101,"offset":918},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example:","position":{"start":{"line":15,"column":1,"offset":920},"end":{"line":15,"column":13,"offset":932},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":920},"end":{"line":15,"column":13,"offset":932},"indent":[]}},{"type":"code","lang":"javascript","value":"import runtime from 'skypager-runtime'\n\nruntime.on('currentUserDidChangeState', () => {\n  const { currentUser } = runtime.currentState\n  runtime.setState({ loggedIn: !!currentUser })\n  console.log('Logged In')\n})\n\nruntime.login = (email, password) =>\n  const currentUser = runtime.authentication.lookup(email).validate(password)\n  runtime.setState({ currentUser })\n\nruntime.login('jon@chicago.com', 'hello')\n// Logged In","position":{"start":{"line":17,"column":1,"offset":934},"end":{"line":32,"column":4,"offset":1372},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Helper State","position":{"start":{"line":34,"column":4,"offset":1377},"end":{"line":34,"column":16,"offset":1389},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1374},"end":{"line":34,"column":16,"offset":1389},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Each helper class can define its own observable attributes.  For example, the ","position":{"start":{"line":36,"column":1,"offset":1391},"end":{"line":36,"column":79,"offset":1469},"indent":[]}},{"type":"inlineCode","value":"Server","position":{"start":{"line":36,"column":79,"offset":1469},"end":{"line":36,"column":87,"offset":1477},"indent":[]}},{"type":"text","value":" helper class declares that it has an observable ","position":{"start":{"line":36,"column":87,"offset":1477},"end":{"line":36,"column":136,"offset":1526},"indent":[]}},{"type":"inlineCode","value":"status","position":{"start":{"line":36,"column":136,"offset":1526},"end":{"line":36,"column":144,"offset":1534},"indent":[]}},{"type":"text","value":".  Whenever the server is ","position":{"start":{"line":36,"column":144,"offset":1534},"end":{"line":36,"column":170,"offset":1560},"indent":[]}},{"type":"inlineCode","value":"started","position":{"start":{"line":36,"column":170,"offset":1560},"end":{"line":36,"column":179,"offset":1569},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":36,"column":179,"offset":1569},"end":{"line":36,"column":183,"offset":1573},"indent":[]}},{"type":"inlineCode","value":"stopped","position":{"start":{"line":36,"column":183,"offset":1573},"end":{"line":36,"column":192,"offset":1582},"indent":[]}},{"type":"text","value":" the instance calls ","position":{"start":{"line":36,"column":192,"offset":1582},"end":{"line":36,"column":212,"offset":1602},"indent":[]}},{"type":"inlineCode","value":"setState({ status: 'started' })","position":{"start":{"line":36,"column":212,"offset":1602},"end":{"line":36,"column":245,"offset":1635},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":36,"column":245,"offset":1635},"end":{"line":36,"column":246,"offset":1636},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1391},"end":{"line":36,"column":246,"offset":1636},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Observable Utils","position":{"start":{"line":38,"column":4,"offset":1641},"end":{"line":38,"column":20,"offset":1657},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1638},"end":{"line":38,"column":20,"offset":1657},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":40,"column":1,"offset":1659},"end":{"line":40,"column":5,"offset":1663},"indent":[]}},{"type":"inlineCode","value":"mobx","position":{"start":{"line":40,"column":5,"offset":1663},"end":{"line":40,"column":11,"offset":1669},"indent":[]}},{"type":"text","value":" library makes working with different types of observable objects quite developer friendly.  Almost any type of observable object can be created by combining several smaller ones.  This leaves developer with a lot of creativity.","position":{"start":{"line":40,"column":11,"offset":1669},"end":{"line":40,"column":239,"offset":1897},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1659},"end":{"line":40,"column":239,"offset":1897},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To help this, the runtime makes it easy to declare a schema for types of observables, and create them when needed at runtime.  Also, as you develop your own custom ","position":{"start":{"line":42,"column":1,"offset":1899},"end":{"line":42,"column":165,"offset":2063},"indent":[]}},{"type":"inlineCode","value":"Helpers","position":{"start":{"line":42,"column":165,"offset":2063},"end":{"line":42,"column":174,"offset":2072},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":42,"column":174,"offset":2072},"end":{"line":42,"column":178,"offset":2076},"indent":[]}},{"type":"inlineCode","value":"Features","position":{"start":{"line":42,"column":178,"offset":2076},"end":{"line":42,"column":188,"offset":2086},"indent":[]}},{"type":"text","value":" being able to rely on observable's APIs means you have all that power at your fingertips by default through the global runtime itself.","position":{"start":{"line":42,"column":188,"offset":2086},"end":{"line":42,"column":323,"offset":2221},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":1899},"end":{"line":42,"column":323,"offset":2221},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Mobx is globally available via the runtime","position":{"start":{"line":44,"column":4,"offset":2226},"end":{"line":44,"column":46,"offset":2268},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":2223},"end":{"line":44,"column":46,"offset":2268},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Since ","position":{"start":{"line":46,"column":1,"offset":2270},"end":{"line":46,"column":7,"offset":2276},"indent":[]}},{"type":"inlineCode","value":"mobx","position":{"start":{"line":46,"column":7,"offset":2276},"end":{"line":46,"column":13,"offset":2282},"indent":[]}},{"type":"text","value":" is so useful, you can automatically access the module via ","position":{"start":{"line":46,"column":13,"offset":2282},"end":{"line":46,"column":72,"offset":2341},"indent":[]}},{"type":"inlineCode","value":"runtime.mobx","position":{"start":{"line":46,"column":72,"offset":2341},"end":{"line":46,"column":86,"offset":2355},"indent":[]}},{"type":"text","value":".  You don't need to include this library in your javascript bundle this way either.","position":{"start":{"line":46,"column":86,"offset":2355},"end":{"line":46,"column":170,"offset":2439},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":2270},"end":{"line":46,"column":170,"offset":2439},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":47,"column":1,"offset":2440}}},"astHash":"03078710c6a1f0a4a4f5dfc93d319f50"},"package.json":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals","base":"package.json","ext":".json","name":"package","path":"/Users/jon/Projects/skypager/src/design-goals/package.json","relative":"package.json","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":14047404,"size":66,"blocks":8,"atimeMs":1511406618000,"mtimeMs":1511406603000,"ctimeMs":1511406603000,"birthtimeMs":1511404060000,"atime":"2017-11-23T03:10:18.000Z","mtime":"2017-11-23T03:10:03.000Z","ctime":"2017-11-23T03:10:03.000Z","birthtime":"2017-11-23T02:27:40.000Z"},"extension":".json","mime":{"mimeType":"application/json"}},"runtime-goals.md":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals","base":"runtime-goals.md","ext":".md","name":"runtime-goals","path":"/Users/jon/Projects/skypager/src/design-goals/runtime-goals.md","relative":"runtime-goals.md","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":13312844,"size":5887,"blocks":16,"atimeMs":1511406389000,"mtimeMs":1510637307000,"ctimeMs":1510637307000,"birthtimeMs":1510637307000,"atime":"2017-11-23T03:06:29.000Z","mtime":"2017-11-14T05:28:27.000Z","ctime":"2017-11-14T05:28:27.000Z","birthtime":"2017-11-14T05:28:27.000Z"},"extension":".md","mime":{"mimeType":"text/markdown"},"content":"# Runtime Goals\n\nThe Runtime's purpose is to act as a globally available dynamic module loader and module registry, it should be compatible with both Webpack and native module systems simultaneously at runtime.\n\nThe runtime should work the same in any deploy target, such as `web` or `node` or `electron-renderer` or `electron-main` as well as `react-native`\n\nThe Runtime should provide a generic `Helper` class which can be extended to be more specific at a class level such as as `Feature`, `Command`, `Server`.\n\nEach of the `Helper` classes should expose their own registry, and individual modules can register themselves with unique identifiers and loaded at runtime on demand.\n\nThese specific `Helper` modules are used to provide a consistent interface, as well as shared state and lifecycle, for working with the underlying modules that get `required` and added to a registry. So for example, if in your project you have multiple subfolders such as `src/commands` and `src/features` and `src/servers` then you can use the `Command` `Feature` or `Server` helpers to work with them in a consistent way by registering them with the helper registry.\n\nEach individual module that gets added to a helper registry can act as a `provider` for these types of helpers by exporting specific properties that adhere to naming and type requirements.  For example a `Server` expects to have a `start` and a `stop` implementation as an asycn function.\n\nAs an implementer of either function, you can expect to have access to the runtime and all of the things it provides. In addition to acting as a module registry, `Helpers` can rely on the runtime as a dependency injection solution for other modules such as `lodash` or `mobx`.\n\nAs an example, platform specific helpers such as `Server` can also expect to be able to access information about the process, and to take advantage of default features in the `skypager-runtime-node` runtime, in addition to all of the other standard node features such as native require etc.\n\n```javascript\nexport async function start(optons = {}) {\n  const { runtime } = this\n  const { defaults } = this.lodash\n  const { argv } = runtime\n\n  const server = this.createServer()\n\n  const { port, hostname } = defaults(argv, {\n    port: 3000,\n    hostname: 'localhost'\n  })\n\n  server.start(post, hostname, (err) => {\n    this.setState({\n      status: 'STARTED',\n      port,\n      hostname\n    })\n  })\n}\n\nexport function createServer(options = {}) {\n  return require('express')()\n}\n```\n\nAs a module developer, you can expect certain dependencies, state, and modules to be available and ready for you to be used based on the type of `Helper` you are developing.  `Server`s and `Command`s for example can access a winston logger, as well as CLI output tools.\n\nThe runtime is extended with methods such as `command` `feature` and `server` which allow you to spawn instances of each of these helper classes by name, and customize their options and configuration at will before using them.\n\n## Global Singleton Behavior\n\nThe runtime expects to be a singleton at a global level, inside of a specific `context` (e.g. `global` or `window`).  Depending on the run target (e.g. `web` or `node`) certain information will be pulled from the process or container, e.g the `process.argv` or `window.location` values.\n\nThese are used to determine the initial startup conditions of the runtime.\n\nExtending this behavior should be doable at both a module level and an application level.\n\n## Consistent Boot Lifecycle Definition\n\nAt an application level, the expectation is that a runtime can be `required` or `imported` and be `prepared` or `started`.\n\nAs an application developer, I want to be able to define my own specific runtime contexts that build upon platform specific behaviors.  Skypager provides default blank slates for `node` in both `production` and `development` contexts as well as an `electron` and `web` runtime.  Each runtime extends the global runtime through the use of initializer functions, by registering and enable features, and by attaching helper classes and registries.\n\nAs a developer of shared runtime features and helpers, it is up to you to decide the appropriate time to inject your functionality.\n\n## Extendable at a per platform level\n\nThe global namespace is populated with a `runtime` property.\n\nPlatform specific runtimes can tap into the boot process of this runtime.\n\n```javascript\nimport runtime from 'skypager-runtime'\n\nruntime.use({\n  initializer(next) {\n\n  }\n}).use({\n  initializer(next) {\n\n  }\n}).use({\n  attach(next) {\n\n  }\n})\n\nexport { runtime }\nexport default runtime\n```\n\nThis works because the `runtime.use` API will automatically apply middleware functions found at either\nthe `attach` or `initializer` property.\n\nAt an application level, this allows developers to define their own customized runtimes, by extending\nit through the use of feature extensions.\n\n```javascript\nimport runtime from 'my-runtime'\nimport platformSpecific from 'my-platform-specific-extensions'\nimport myHelper from 'my-helper'\nimport myOtherHelper from 'my-other-helper'\n\nruntime.use(platformSpecific).use(myHelper).use(myOtherHelper)\n\nexport { runtime }\n\nexport default runtime\n```\n\n## Extendable via Feature Modules\n\nSkypager provides a `Feature` helper which allows developers to provide any specific functionality to the global runtime.\n\nA `Feature` can expect to respond to a request `isSupported` and to return true or false.  Your `isSupported` information can expect to access platform specific information such as `env` and `argv` to be able to make its decision.\n\nA `Feature` can export a `featureWasEnabled` function that will be called whenever that feature is enabled on the runtime.\n\nA `Feature` can extend either the `runtime` or itself.\n\n```javascript\nimport runtime from 'skypager-runtime'\n\nruntime.use('my-feature').use('my-other-feature')\n```\n","hash":"ae3a8bf3aaf2bb75c767a1bc6a67c91a","ast":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Runtime Goals","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":16,"offset":15},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":16,"offset":15},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Runtime's purpose is to act as a globally available dynamic module loader and module registry, it should be compatible with both Webpack and native module systems simultaneously at runtime.","position":{"start":{"line":3,"column":1,"offset":17},"end":{"line":3,"column":194,"offset":210},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":17},"end":{"line":3,"column":194,"offset":210},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The runtime should work the same in any deploy target, such as ","position":{"start":{"line":5,"column":1,"offset":212},"end":{"line":5,"column":64,"offset":275},"indent":[]}},{"type":"inlineCode","value":"web","position":{"start":{"line":5,"column":64,"offset":275},"end":{"line":5,"column":69,"offset":280},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":5,"column":69,"offset":280},"end":{"line":5,"column":73,"offset":284},"indent":[]}},{"type":"inlineCode","value":"node","position":{"start":{"line":5,"column":73,"offset":284},"end":{"line":5,"column":79,"offset":290},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":5,"column":79,"offset":290},"end":{"line":5,"column":83,"offset":294},"indent":[]}},{"type":"inlineCode","value":"electron-renderer","position":{"start":{"line":5,"column":83,"offset":294},"end":{"line":5,"column":102,"offset":313},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":5,"column":102,"offset":313},"end":{"line":5,"column":106,"offset":317},"indent":[]}},{"type":"inlineCode","value":"electron-main","position":{"start":{"line":5,"column":106,"offset":317},"end":{"line":5,"column":121,"offset":332},"indent":[]}},{"type":"text","value":" as well as ","position":{"start":{"line":5,"column":121,"offset":332},"end":{"line":5,"column":133,"offset":344},"indent":[]}},{"type":"inlineCode","value":"react-native","position":{"start":{"line":5,"column":133,"offset":344},"end":{"line":5,"column":147,"offset":358},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":212},"end":{"line":5,"column":147,"offset":358},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Runtime should provide a generic ","position":{"start":{"line":7,"column":1,"offset":360},"end":{"line":7,"column":38,"offset":397},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":7,"column":38,"offset":397},"end":{"line":7,"column":46,"offset":405},"indent":[]}},{"type":"text","value":" class which can be extended to be more specific at a class level such as as ","position":{"start":{"line":7,"column":46,"offset":405},"end":{"line":7,"column":123,"offset":482},"indent":[]}},{"type":"inlineCode","value":"Feature","position":{"start":{"line":7,"column":123,"offset":482},"end":{"line":7,"column":132,"offset":491},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":7,"column":132,"offset":491},"end":{"line":7,"column":134,"offset":493},"indent":[]}},{"type":"inlineCode","value":"Command","position":{"start":{"line":7,"column":134,"offset":493},"end":{"line":7,"column":143,"offset":502},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":7,"column":143,"offset":502},"end":{"line":7,"column":145,"offset":504},"indent":[]}},{"type":"inlineCode","value":"Server","position":{"start":{"line":7,"column":145,"offset":504},"end":{"line":7,"column":153,"offset":512},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":7,"column":153,"offset":512},"end":{"line":7,"column":154,"offset":513},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":360},"end":{"line":7,"column":154,"offset":513},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Each of the ","position":{"start":{"line":9,"column":1,"offset":515},"end":{"line":9,"column":13,"offset":527},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":9,"column":13,"offset":527},"end":{"line":9,"column":21,"offset":535},"indent":[]}},{"type":"text","value":" classes should expose their own registry, and individual modules can register themselves with unique identifiers and loaded at runtime on demand.","position":{"start":{"line":9,"column":21,"offset":535},"end":{"line":9,"column":167,"offset":681},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":515},"end":{"line":9,"column":167,"offset":681},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"These specific ","position":{"start":{"line":11,"column":1,"offset":683},"end":{"line":11,"column":16,"offset":698},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":11,"column":16,"offset":698},"end":{"line":11,"column":24,"offset":706},"indent":[]}},{"type":"text","value":" modules are used to provide a consistent interface, as well as shared state and lifecycle, for working with the underlying modules that get ","position":{"start":{"line":11,"column":24,"offset":706},"end":{"line":11,"column":165,"offset":847},"indent":[]}},{"type":"inlineCode","value":"required","position":{"start":{"line":11,"column":165,"offset":847},"end":{"line":11,"column":175,"offset":857},"indent":[]}},{"type":"text","value":" and added to a registry. So for example, if in your project you have multiple subfolders such as ","position":{"start":{"line":11,"column":175,"offset":857},"end":{"line":11,"column":273,"offset":955},"indent":[]}},{"type":"inlineCode","value":"src/commands","position":{"start":{"line":11,"column":273,"offset":955},"end":{"line":11,"column":287,"offset":969},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":11,"column":287,"offset":969},"end":{"line":11,"column":292,"offset":974},"indent":[]}},{"type":"inlineCode","value":"src/features","position":{"start":{"line":11,"column":292,"offset":974},"end":{"line":11,"column":306,"offset":988},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":11,"column":306,"offset":988},"end":{"line":11,"column":311,"offset":993},"indent":[]}},{"type":"inlineCode","value":"src/servers","position":{"start":{"line":11,"column":311,"offset":993},"end":{"line":11,"column":324,"offset":1006},"indent":[]}},{"type":"text","value":" then you can use the ","position":{"start":{"line":11,"column":324,"offset":1006},"end":{"line":11,"column":346,"offset":1028},"indent":[]}},{"type":"inlineCode","value":"Command","position":{"start":{"line":11,"column":346,"offset":1028},"end":{"line":11,"column":355,"offset":1037},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":11,"column":355,"offset":1037},"end":{"line":11,"column":356,"offset":1038},"indent":[]}},{"type":"inlineCode","value":"Feature","position":{"start":{"line":11,"column":356,"offset":1038},"end":{"line":11,"column":365,"offset":1047},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":11,"column":365,"offset":1047},"end":{"line":11,"column":369,"offset":1051},"indent":[]}},{"type":"inlineCode","value":"Server","position":{"start":{"line":11,"column":369,"offset":1051},"end":{"line":11,"column":377,"offset":1059},"indent":[]}},{"type":"text","value":" helpers to work with them in a consistent way by registering them with the helper registry.","position":{"start":{"line":11,"column":377,"offset":1059},"end":{"line":11,"column":469,"offset":1151},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":683},"end":{"line":11,"column":469,"offset":1151},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Each individual module that gets added to a helper registry can act as a ","position":{"start":{"line":13,"column":1,"offset":1153},"end":{"line":13,"column":74,"offset":1226},"indent":[]}},{"type":"inlineCode","value":"provider","position":{"start":{"line":13,"column":74,"offset":1226},"end":{"line":13,"column":84,"offset":1236},"indent":[]}},{"type":"text","value":" for these types of helpers by exporting specific properties that adhere to naming and type requirements.  For example a ","position":{"start":{"line":13,"column":84,"offset":1236},"end":{"line":13,"column":205,"offset":1357},"indent":[]}},{"type":"inlineCode","value":"Server","position":{"start":{"line":13,"column":205,"offset":1357},"end":{"line":13,"column":213,"offset":1365},"indent":[]}},{"type":"text","value":" expects to have a ","position":{"start":{"line":13,"column":213,"offset":1365},"end":{"line":13,"column":232,"offset":1384},"indent":[]}},{"type":"inlineCode","value":"start","position":{"start":{"line":13,"column":232,"offset":1384},"end":{"line":13,"column":239,"offset":1391},"indent":[]}},{"type":"text","value":" and a ","position":{"start":{"line":13,"column":239,"offset":1391},"end":{"line":13,"column":246,"offset":1398},"indent":[]}},{"type":"inlineCode","value":"stop","position":{"start":{"line":13,"column":246,"offset":1398},"end":{"line":13,"column":252,"offset":1404},"indent":[]}},{"type":"text","value":" implementation as an asycn function.","position":{"start":{"line":13,"column":252,"offset":1404},"end":{"line":13,"column":289,"offset":1441},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":1153},"end":{"line":13,"column":289,"offset":1441},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As an implementer of either function, you can expect to have access to the runtime and all of the things it provides. In addition to acting as a module registry, ","position":{"start":{"line":15,"column":1,"offset":1443},"end":{"line":15,"column":163,"offset":1605},"indent":[]}},{"type":"inlineCode","value":"Helpers","position":{"start":{"line":15,"column":163,"offset":1605},"end":{"line":15,"column":172,"offset":1614},"indent":[]}},{"type":"text","value":" can rely on the runtime as a dependency injection solution for other modules such as ","position":{"start":{"line":15,"column":172,"offset":1614},"end":{"line":15,"column":258,"offset":1700},"indent":[]}},{"type":"inlineCode","value":"lodash","position":{"start":{"line":15,"column":258,"offset":1700},"end":{"line":15,"column":266,"offset":1708},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":15,"column":266,"offset":1708},"end":{"line":15,"column":270,"offset":1712},"indent":[]}},{"type":"inlineCode","value":"mobx","position":{"start":{"line":15,"column":270,"offset":1712},"end":{"line":15,"column":276,"offset":1718},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":15,"column":276,"offset":1718},"end":{"line":15,"column":277,"offset":1719},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":1443},"end":{"line":15,"column":277,"offset":1719},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As an example, platform specific helpers such as ","position":{"start":{"line":17,"column":1,"offset":1721},"end":{"line":17,"column":50,"offset":1770},"indent":[]}},{"type":"inlineCode","value":"Server","position":{"start":{"line":17,"column":50,"offset":1770},"end":{"line":17,"column":58,"offset":1778},"indent":[]}},{"type":"text","value":" can also expect to be able to access information about the process, and to take advantage of default features in the ","position":{"start":{"line":17,"column":58,"offset":1778},"end":{"line":17,"column":176,"offset":1896},"indent":[]}},{"type":"inlineCode","value":"skypager-runtime-node","position":{"start":{"line":17,"column":176,"offset":1896},"end":{"line":17,"column":199,"offset":1919},"indent":[]}},{"type":"text","value":" runtime, in addition to all of the other standard node features such as native require etc.","position":{"start":{"line":17,"column":199,"offset":1919},"end":{"line":17,"column":291,"offset":2011},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":1721},"end":{"line":17,"column":291,"offset":2011},"indent":[]}},{"type":"code","lang":"javascript","value":"export async function start(optons = {}) {\n  const { runtime } = this\n  const { defaults } = this.lodash\n  const { argv } = runtime\n\n  const server = this.createServer()\n\n  const { port, hostname } = defaults(argv, {\n    port: 3000,\n    hostname: 'localhost'\n  })\n\n  server.start(post, hostname, (err) => {\n    this.setState({\n      status: 'STARTED',\n      port,\n      hostname\n    })\n  })\n}\n\nexport function createServer(options = {}) {\n  return require('express')()\n}","position":{"start":{"line":19,"column":1,"offset":2013},"end":{"line":44,"column":4,"offset":2501},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"As a module developer, you can expect certain dependencies, state, and modules to be available and ready for you to be used based on the type of ","position":{"start":{"line":46,"column":1,"offset":2503},"end":{"line":46,"column":146,"offset":2648},"indent":[]}},{"type":"inlineCode","value":"Helper","position":{"start":{"line":46,"column":146,"offset":2648},"end":{"line":46,"column":154,"offset":2656},"indent":[]}},{"type":"text","value":" you are developing.  ","position":{"start":{"line":46,"column":154,"offset":2656},"end":{"line":46,"column":176,"offset":2678},"indent":[]}},{"type":"inlineCode","value":"Server","position":{"start":{"line":46,"column":176,"offset":2678},"end":{"line":46,"column":184,"offset":2686},"indent":[]}},{"type":"text","value":"s and ","position":{"start":{"line":46,"column":184,"offset":2686},"end":{"line":46,"column":190,"offset":2692},"indent":[]}},{"type":"inlineCode","value":"Command","position":{"start":{"line":46,"column":190,"offset":2692},"end":{"line":46,"column":199,"offset":2701},"indent":[]}},{"type":"text","value":"s for example can access a winston logger, as well as CLI output tools.","position":{"start":{"line":46,"column":199,"offset":2701},"end":{"line":46,"column":270,"offset":2772},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":2503},"end":{"line":46,"column":270,"offset":2772},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The runtime is extended with methods such as ","position":{"start":{"line":48,"column":1,"offset":2774},"end":{"line":48,"column":46,"offset":2819},"indent":[]}},{"type":"inlineCode","value":"command","position":{"start":{"line":48,"column":46,"offset":2819},"end":{"line":48,"column":55,"offset":2828},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":48,"column":55,"offset":2828},"end":{"line":48,"column":56,"offset":2829},"indent":[]}},{"type":"inlineCode","value":"feature","position":{"start":{"line":48,"column":56,"offset":2829},"end":{"line":48,"column":65,"offset":2838},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":48,"column":65,"offset":2838},"end":{"line":48,"column":70,"offset":2843},"indent":[]}},{"type":"inlineCode","value":"server","position":{"start":{"line":48,"column":70,"offset":2843},"end":{"line":48,"column":78,"offset":2851},"indent":[]}},{"type":"text","value":" which allow you to spawn instances of each of these helper classes by name, and customize their options and configuration at will before using them.","position":{"start":{"line":48,"column":78,"offset":2851},"end":{"line":48,"column":227,"offset":3000},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":2774},"end":{"line":48,"column":227,"offset":3000},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Global Singleton Behavior","position":{"start":{"line":50,"column":4,"offset":3005},"end":{"line":50,"column":29,"offset":3030},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":3002},"end":{"line":50,"column":29,"offset":3030},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The runtime expects to be a singleton at a global level, inside of a specific ","position":{"start":{"line":52,"column":1,"offset":3032},"end":{"line":52,"column":79,"offset":3110},"indent":[]}},{"type":"inlineCode","value":"context","position":{"start":{"line":52,"column":79,"offset":3110},"end":{"line":52,"column":88,"offset":3119},"indent":[]}},{"type":"text","value":" (e.g. ","position":{"start":{"line":52,"column":88,"offset":3119},"end":{"line":52,"column":95,"offset":3126},"indent":[]}},{"type":"inlineCode","value":"global","position":{"start":{"line":52,"column":95,"offset":3126},"end":{"line":52,"column":103,"offset":3134},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":52,"column":103,"offset":3134},"end":{"line":52,"column":107,"offset":3138},"indent":[]}},{"type":"inlineCode","value":"window","position":{"start":{"line":52,"column":107,"offset":3138},"end":{"line":52,"column":115,"offset":3146},"indent":[]}},{"type":"text","value":").  Depending on the run target (e.g. ","position":{"start":{"line":52,"column":115,"offset":3146},"end":{"line":52,"column":153,"offset":3184},"indent":[]}},{"type":"inlineCode","value":"web","position":{"start":{"line":52,"column":153,"offset":3184},"end":{"line":52,"column":158,"offset":3189},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":52,"column":158,"offset":3189},"end":{"line":52,"column":162,"offset":3193},"indent":[]}},{"type":"inlineCode","value":"node","position":{"start":{"line":52,"column":162,"offset":3193},"end":{"line":52,"column":168,"offset":3199},"indent":[]}},{"type":"text","value":") certain information will be pulled from the process or container, e.g the ","position":{"start":{"line":52,"column":168,"offset":3199},"end":{"line":52,"column":244,"offset":3275},"indent":[]}},{"type":"inlineCode","value":"process.argv","position":{"start":{"line":52,"column":244,"offset":3275},"end":{"line":52,"column":258,"offset":3289},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":52,"column":258,"offset":3289},"end":{"line":52,"column":262,"offset":3293},"indent":[]}},{"type":"inlineCode","value":"window.location","position":{"start":{"line":52,"column":262,"offset":3293},"end":{"line":52,"column":279,"offset":3310},"indent":[]}},{"type":"text","value":" values.","position":{"start":{"line":52,"column":279,"offset":3310},"end":{"line":52,"column":287,"offset":3318},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":3032},"end":{"line":52,"column":287,"offset":3318},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"These are used to determine the initial startup conditions of the runtime.","position":{"start":{"line":54,"column":1,"offset":3320},"end":{"line":54,"column":75,"offset":3394},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":3320},"end":{"line":54,"column":75,"offset":3394},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Extending this behavior should be doable at both a module level and an application level.","position":{"start":{"line":56,"column":1,"offset":3396},"end":{"line":56,"column":90,"offset":3485},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":3396},"end":{"line":56,"column":90,"offset":3485},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Consistent Boot Lifecycle Definition","position":{"start":{"line":58,"column":4,"offset":3490},"end":{"line":58,"column":40,"offset":3526},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3487},"end":{"line":58,"column":40,"offset":3526},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"At an application level, the expectation is that a runtime can be ","position":{"start":{"line":60,"column":1,"offset":3528},"end":{"line":60,"column":67,"offset":3594},"indent":[]}},{"type":"inlineCode","value":"required","position":{"start":{"line":60,"column":67,"offset":3594},"end":{"line":60,"column":77,"offset":3604},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":60,"column":77,"offset":3604},"end":{"line":60,"column":81,"offset":3608},"indent":[]}},{"type":"inlineCode","value":"imported","position":{"start":{"line":60,"column":81,"offset":3608},"end":{"line":60,"column":91,"offset":3618},"indent":[]}},{"type":"text","value":" and be ","position":{"start":{"line":60,"column":91,"offset":3618},"end":{"line":60,"column":99,"offset":3626},"indent":[]}},{"type":"inlineCode","value":"prepared","position":{"start":{"line":60,"column":99,"offset":3626},"end":{"line":60,"column":109,"offset":3636},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":60,"column":109,"offset":3636},"end":{"line":60,"column":113,"offset":3640},"indent":[]}},{"type":"inlineCode","value":"started","position":{"start":{"line":60,"column":113,"offset":3640},"end":{"line":60,"column":122,"offset":3649},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":60,"column":122,"offset":3649},"end":{"line":60,"column":123,"offset":3650},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":3528},"end":{"line":60,"column":123,"offset":3650},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As an application developer, I want to be able to define my own specific runtime contexts that build upon platform specific behaviors.  Skypager provides default blank slates for ","position":{"start":{"line":62,"column":1,"offset":3652},"end":{"line":62,"column":180,"offset":3831},"indent":[]}},{"type":"inlineCode","value":"node","position":{"start":{"line":62,"column":180,"offset":3831},"end":{"line":62,"column":186,"offset":3837},"indent":[]}},{"type":"text","value":" in both ","position":{"start":{"line":62,"column":186,"offset":3837},"end":{"line":62,"column":195,"offset":3846},"indent":[]}},{"type":"inlineCode","value":"production","position":{"start":{"line":62,"column":195,"offset":3846},"end":{"line":62,"column":207,"offset":3858},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":62,"column":207,"offset":3858},"end":{"line":62,"column":212,"offset":3863},"indent":[]}},{"type":"inlineCode","value":"development","position":{"start":{"line":62,"column":212,"offset":3863},"end":{"line":62,"column":225,"offset":3876},"indent":[]}},{"type":"text","value":" contexts as well as an ","position":{"start":{"line":62,"column":225,"offset":3876},"end":{"line":62,"column":249,"offset":3900},"indent":[]}},{"type":"inlineCode","value":"electron","position":{"start":{"line":62,"column":249,"offset":3900},"end":{"line":62,"column":259,"offset":3910},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":62,"column":259,"offset":3910},"end":{"line":62,"column":264,"offset":3915},"indent":[]}},{"type":"inlineCode","value":"web","position":{"start":{"line":62,"column":264,"offset":3915},"end":{"line":62,"column":269,"offset":3920},"indent":[]}},{"type":"text","value":" runtime.  Each runtime extends the global runtime through the use of initializer functions, by registering and enable features, and by attaching helper classes and registries.","position":{"start":{"line":62,"column":269,"offset":3920},"end":{"line":62,"column":445,"offset":4096},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":3652},"end":{"line":62,"column":445,"offset":4096},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As a developer of shared runtime features and helpers, it is up to you to decide the appropriate time to inject your functionality.","position":{"start":{"line":64,"column":1,"offset":4098},"end":{"line":64,"column":132,"offset":4229},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":4098},"end":{"line":64,"column":132,"offset":4229},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Extendable at a per platform level","position":{"start":{"line":66,"column":4,"offset":4234},"end":{"line":66,"column":38,"offset":4268},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":4231},"end":{"line":66,"column":38,"offset":4268},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The global namespace is populated with a ","position":{"start":{"line":68,"column":1,"offset":4270},"end":{"line":68,"column":42,"offset":4311},"indent":[]}},{"type":"inlineCode","value":"runtime","position":{"start":{"line":68,"column":42,"offset":4311},"end":{"line":68,"column":51,"offset":4320},"indent":[]}},{"type":"text","value":" property.","position":{"start":{"line":68,"column":51,"offset":4320},"end":{"line":68,"column":61,"offset":4330},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":4270},"end":{"line":68,"column":61,"offset":4330},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Platform specific runtimes can tap into the boot process of this runtime.","position":{"start":{"line":70,"column":1,"offset":4332},"end":{"line":70,"column":74,"offset":4405},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":4332},"end":{"line":70,"column":74,"offset":4405},"indent":[]}},{"type":"code","lang":"javascript","value":"import runtime from 'skypager-runtime'\n\nruntime.use({\n  initializer(next) {\n\n  }\n}).use({\n  initializer(next) {\n\n  }\n}).use({\n  attach(next) {\n\n  }\n})\n\nexport { runtime }\nexport default runtime","position":{"start":{"line":72,"column":1,"offset":4407},"end":{"line":91,"column":4,"offset":4618},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This works because the ","position":{"start":{"line":93,"column":1,"offset":4620},"end":{"line":93,"column":24,"offset":4643},"indent":[]}},{"type":"inlineCode","value":"runtime.use","position":{"start":{"line":93,"column":24,"offset":4643},"end":{"line":93,"column":37,"offset":4656},"indent":[]}},{"type":"text","value":" API will automatically apply middleware functions found at either\nthe ","position":{"start":{"line":93,"column":37,"offset":4656},"end":{"line":94,"column":5,"offset":4727},"indent":[1]}},{"type":"inlineCode","value":"attach","position":{"start":{"line":94,"column":5,"offset":4727},"end":{"line":94,"column":13,"offset":4735},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":94,"column":13,"offset":4735},"end":{"line":94,"column":17,"offset":4739},"indent":[]}},{"type":"inlineCode","value":"initializer","position":{"start":{"line":94,"column":17,"offset":4739},"end":{"line":94,"column":30,"offset":4752},"indent":[]}},{"type":"text","value":" property.","position":{"start":{"line":94,"column":30,"offset":4752},"end":{"line":94,"column":40,"offset":4762},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":4620},"end":{"line":94,"column":40,"offset":4762},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"At an application level, this allows developers to define their own customized runtimes, by extending\nit through the use of feature extensions.","position":{"start":{"line":96,"column":1,"offset":4764},"end":{"line":97,"column":42,"offset":4907},"indent":[1]}}],"position":{"start":{"line":96,"column":1,"offset":4764},"end":{"line":97,"column":42,"offset":4907},"indent":[1]}},{"type":"code","lang":"javascript","value":"import runtime from 'my-runtime'\nimport platformSpecific from 'my-platform-specific-extensions'\nimport myHelper from 'my-helper'\nimport myOtherHelper from 'my-other-helper'\n\nruntime.use(platformSpecific).use(myHelper).use(myOtherHelper)\n\nexport { runtime }\n\nexport default runtime","position":{"start":{"line":99,"column":1,"offset":4909},"end":{"line":110,"column":4,"offset":5207},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Extendable via Feature Modules","position":{"start":{"line":112,"column":4,"offset":5212},"end":{"line":112,"column":34,"offset":5242},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":5209},"end":{"line":112,"column":34,"offset":5242},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Skypager provides a ","position":{"start":{"line":114,"column":1,"offset":5244},"end":{"line":114,"column":21,"offset":5264},"indent":[]}},{"type":"inlineCode","value":"Feature","position":{"start":{"line":114,"column":21,"offset":5264},"end":{"line":114,"column":30,"offset":5273},"indent":[]}},{"type":"text","value":" helper which allows developers to provide any specific functionality to the global runtime.","position":{"start":{"line":114,"column":30,"offset":5273},"end":{"line":114,"column":122,"offset":5365},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":5244},"end":{"line":114,"column":122,"offset":5365},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":116,"column":1,"offset":5367},"end":{"line":116,"column":3,"offset":5369},"indent":[]}},{"type":"inlineCode","value":"Feature","position":{"start":{"line":116,"column":3,"offset":5369},"end":{"line":116,"column":12,"offset":5378},"indent":[]}},{"type":"text","value":" can expect to respond to a request ","position":{"start":{"line":116,"column":12,"offset":5378},"end":{"line":116,"column":48,"offset":5414},"indent":[]}},{"type":"inlineCode","value":"isSupported","position":{"start":{"line":116,"column":48,"offset":5414},"end":{"line":116,"column":61,"offset":5427},"indent":[]}},{"type":"text","value":" and to return true or false.  Your ","position":{"start":{"line":116,"column":61,"offset":5427},"end":{"line":116,"column":97,"offset":5463},"indent":[]}},{"type":"inlineCode","value":"isSupported","position":{"start":{"line":116,"column":97,"offset":5463},"end":{"line":116,"column":110,"offset":5476},"indent":[]}},{"type":"text","value":" information can expect to access platform specific information such as ","position":{"start":{"line":116,"column":110,"offset":5476},"end":{"line":116,"column":182,"offset":5548},"indent":[]}},{"type":"inlineCode","value":"env","position":{"start":{"line":116,"column":182,"offset":5548},"end":{"line":116,"column":187,"offset":5553},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":116,"column":187,"offset":5553},"end":{"line":116,"column":192,"offset":5558},"indent":[]}},{"type":"inlineCode","value":"argv","position":{"start":{"line":116,"column":192,"offset":5558},"end":{"line":116,"column":198,"offset":5564},"indent":[]}},{"type":"text","value":" to be able to make its decision.","position":{"start":{"line":116,"column":198,"offset":5564},"end":{"line":116,"column":231,"offset":5597},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":5367},"end":{"line":116,"column":231,"offset":5597},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":118,"column":1,"offset":5599},"end":{"line":118,"column":3,"offset":5601},"indent":[]}},{"type":"inlineCode","value":"Feature","position":{"start":{"line":118,"column":3,"offset":5601},"end":{"line":118,"column":12,"offset":5610},"indent":[]}},{"type":"text","value":" can export a ","position":{"start":{"line":118,"column":12,"offset":5610},"end":{"line":118,"column":26,"offset":5624},"indent":[]}},{"type":"inlineCode","value":"featureWasEnabled","position":{"start":{"line":118,"column":26,"offset":5624},"end":{"line":118,"column":45,"offset":5643},"indent":[]}},{"type":"text","value":" function that will be called whenever that feature is enabled on the runtime.","position":{"start":{"line":118,"column":45,"offset":5643},"end":{"line":118,"column":123,"offset":5721},"indent":[]}}],"position":{"start":{"line":118,"column":1,"offset":5599},"end":{"line":118,"column":123,"offset":5721},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":120,"column":1,"offset":5723},"end":{"line":120,"column":3,"offset":5725},"indent":[]}},{"type":"inlineCode","value":"Feature","position":{"start":{"line":120,"column":3,"offset":5725},"end":{"line":120,"column":12,"offset":5734},"indent":[]}},{"type":"text","value":" can extend either the ","position":{"start":{"line":120,"column":12,"offset":5734},"end":{"line":120,"column":35,"offset":5757},"indent":[]}},{"type":"inlineCode","value":"runtime","position":{"start":{"line":120,"column":35,"offset":5757},"end":{"line":120,"column":44,"offset":5766},"indent":[]}},{"type":"text","value":" or itself.","position":{"start":{"line":120,"column":44,"offset":5766},"end":{"line":120,"column":55,"offset":5777},"indent":[]}}],"position":{"start":{"line":120,"column":1,"offset":5723},"end":{"line":120,"column":55,"offset":5777},"indent":[]}},{"type":"code","lang":"javascript","value":"import runtime from 'skypager-runtime'\n\nruntime.use('my-feature').use('my-other-feature')","position":{"start":{"line":122,"column":1,"offset":5779},"end":{"line":126,"column":4,"offset":5886},"indent":[1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":127,"column":1,"offset":5887}}},"astHash":"ae3a8bf3aaf2bb75c767a1bc6a67c91a"},"skypager.js":{"root":"/","dir":"/Users/jon/Projects/skypager/src/design-goals","base":"skypager.js","ext":".js","name":"skypager","path":"/Users/jon/Projects/skypager/src/design-goals/skypager.js","relative":"skypager.js","stats":{"dev":16777220,"mode":33188,"nlink":1,"uid":501,"gid":20,"rdev":0,"blksize":4096,"ino":14047187,"size":25,"blocks":8,"atimeMs":1511406612000,"mtimeMs":1511406282000,"ctimeMs":1511406282000,"birthtimeMs":1511403874000,"atime":"2017-11-23T03:10:12.000Z","mtime":"2017-11-23T03:04:42.000Z","ctime":"2017-11-23T03:04:42.000Z","birthtime":"2017-11-23T02:24:34.000Z"},"extension":".js","mime":{"mimeType":"application/javascript"},"content":"// load any custom stuff\n","hash":"767b440d84c86ddffba63801fa9c292a","ast":{"type":"File","start":0,"end":25,"loc":{"start":{"line":1,"column":0},"end":{"line":2,"column":0}},"program":{"type":"Program","start":0,"end":25,"loc":{"start":{"line":1,"column":0},"end":{"line":2,"column":0}},"sourceType":"module","body":[],"directives":[{"type":"Directive","value":{"type":"DirectiveLiteral","value":"use strict"}}],"leadingComments":null,"innerComments":[{"type":"CommentLine","value":" load any custom stuff","start":0,"end":24,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":24}}}],"_letDone":true},"comments":[{"type":"CommentLine","value":" load any custom stuff","start":0,"end":24,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":24}}}],"tokens":[{"type":"CommentLine","value":" load any custom stuff","start":0,"end":24,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":24}}},{"type":{"label":"eof","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":25,"end":25,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":0}}}]},"astHash":"767b440d84c86ddffba63801fa9c292a"}}
